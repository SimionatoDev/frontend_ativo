"use strict";(self.webpackChunkinventario=self.webpackChunkinventario||[]).push([[215],{3215:(Z,h,a)=>{a.r(h),a.d(h,{AnexarProdutosModule:()=>H});var p=a(8583),m=a(4655),A=a(8569),v=a(1878),l=a(4576),S=a(4372),s=a(3010),g=a(6825),d=a(6809),f=a(9134),T=a(1543);class P{constructor(){this.id_empresa=0,this.id_filial=0,this.id_inventario=0}}var o=a(7716),C=a(3317),u=a(3679),I=a(8913),z=a(5298),U=a(9297),O=a(5884),E=a(6288),N=a(789),L=a(2522),J=a(1095),y=a(1436),$=a(6627),_=a(8295),F=a(7441),R=a(2458),B=a(9983);function M(e,r){if(1&e&&(o.TgZ(0,"mat-option",14),o._uU(1),o.qZA()),2&e){const t=r.$implicit;o.Q6J("value",t.id),o.xp6(1),o.hij(" ",t.razao," ")}}function Y(e,r){if(1&e&&(o.TgZ(0,"mat-option",14),o._uU(1),o.qZA()),2&e){const t=r.$implicit;o.Q6J("value",t.id),o.xp6(1),o.hij(" ",t.razao," ")}}function D(e,r){if(1&e&&(o.TgZ(0,"mat-option",14),o._uU(1),o.qZA()),2&e){const t=r.$implicit;o.Q6J("value",t.codigo),o.xp6(1),o.hij(" ",t.descricao," ")}}function G(e,r){if(1&e){const t=o.EpF();o.TgZ(0,"button",12),o.NdJ("click",function(){return o.CHM(t),o.oxw(2).onProcessar()}),o.TgZ(1,"mat-icon"),o._uU(2,"check"),o.qZA(),o._uU(3," Processar "),o.qZA()}}function Q(e,r){if(1&e){const t=o.EpF();o.TgZ(0,"div",3),o.TgZ(1,"form",15),o.TgZ(2,"div",16),o.TgZ(3,"mat-form-field",17),o.TgZ(4,"mat-label"),o._uU(5,"TOTAL DE PRODUTOS"),o.qZA(),o._UZ(6,"input",18),o.qZA(),o.TgZ(7,"mat-form-field",17),o.TgZ(8,"mat-label"),o._uU(9,"TOTAL DE PRODUTOS ANEXADOS"),o.qZA(),o._UZ(10,"input",19),o.qZA(),o.TgZ(11,"mat-form-field",17),o.TgZ(12,"mat-label"),o._uU(13,"TOTAL DE PRODUTOS A ANEXAR"),o.qZA(),o._UZ(14,"input",20),o.qZA(),o.qZA(),o.qZA(),o.TgZ(15,"div",11),o.YNc(16,G,4,0,"button",21),o.TgZ(17,"button",22),o.NdJ("click",function(){return o.CHM(t),o.oxw().onCancelar()}),o.TgZ(18,"mat-icon"),o._uU(19,"cancel"),o.qZA(),o._uU(20," Cancelar "),o.qZA(),o.qZA(),o.qZA()}if(2&e){const t=o.oxw();o.xp6(1),o.Q6J("formGroup",t.resumo),o.xp6(5),o.Q6J("readonly",!0),o.xp6(4),o.Q6J("readonly",!0),o.xp6(4),o.Q6J("readonly",!0),o.xp6(2),o.Q6J("ngIf",t.anexar)}}const V=[{path:"",redirectTo:"anexar-produtos",pathMatch:"full"},{path:"anexar-produtos",component:(()=>{class e{constructor(t,i,n,c,b,x,W,w,oo){this.globalService=t,this.formBuilder=i,this.empresaService=n,this.localService=c,this.inventarioService=b,this.imobilizadoService=x,this.imoInventarioService=W,this.router=w,this.appSnackBar=oo,this.empresas=[],this.empresa=new A.Y,this.locais=[],this.local=new l.s,this.inventarios=[],this.inventario=new v.q,this.total_produtos=0,this.total_produtos_anexados=0,this.total_produtos_anexar=0,this.anexar=!1,this.verificado=!1,this.parametros=i.group({empresa:[null],local:[null],inventario:[null]}),this.resumo=i.group({total_produtos:[null],total_produtos_anexados:[null],total_produtos_anexar:[null]})}ngOnInit(){this.setValuesResumo(),this.onGetEmpresas()}ngOnDestroy(){var t,i,n,c,b,x;null===(t=this.inscricaoEmpresas)||void 0===t||t.unsubscribe(),null===(i=this.inscricaoLocais)||void 0===i||i.unsubscribe(),null===(n=this.inscricaoInventarios)||void 0===n||n.unsubscribe(),null===(c=this.inscricaoTotalImobilizados)||void 0===c||c.unsubscribe(),null===(b=this.inscricaoTotalAnexados)||void 0===b||b.unsubscribe(),null===(x=this.inscricaoAnexar)||void 0===x||x.unsubscribe()}onGetEmpresas(){let t=new S.F;t.orderby="C\xf3digo",this.globalService.setSpin(!0),this.inscricaoEmpresas=this.empresaService.getEmpresasParametro_01(t).subscribe(i=>{this.globalService.setSpin(!1),this.empresas=i,this.empresa=this.empresas[0],this.setValues(),this.onGetLocais()},i=>{this.globalService.setSpin(!1),this.empresas=[],this.appSnackBar.openFailureSnackBar(`Pesquisa Nas Empresas ${(0,d.bZ)(i)}`,"OK")})}onGetLocais(){let t=new g.X;t.id_empresa=this.empresa.id,t.orderby="C\xf3digo",this.globalService.setSpin(!0),this.inscricaoLocais=this.localService.getLocaisParametro_01(t).subscribe(i=>{this.globalService.setSpin(!1),this.locais=i,this.local=this.locais[0],this.parametros.patchValue({local:this.local.id}),this.onGetInventarios()},i=>{this.globalService.setSpin(!1),this.locais=[],this.local=new l.s,this.inventarios=[],this.inventario=new v.q,this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Locais ${(0,d.bZ)(i)}`,"OK")})}onGetInventarios(){var t,i;let n=new s.T;n.id_empresa=null===(t=this.parametros.value)||void 0===t?void 0:t.empresa,n.id_filial=null===(i=this.parametros.value)||void 0===i?void 0:i.local,n.orderby="Descri\xe7\xe3o",this.globalService.setSpin(!0),this.inscricaoInventarios=this.inventarioService.getInventariosParametro_01(n).subscribe(c=>{this.globalService.setSpin(!1),this.inventarios=c,this.inventario=c[0],this.parametros.patchValue({inventario:this.inventario.codigo}),this.inventario=this.inventarios[0]},c=>{this.globalService.setSpin(!1),this.empresas=[],this.empresa=new A.Y,this.locais=[],this.local=new l.s,this.inventarios=[],this.inventario=new v.q,this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Invent\xe1rios ${(0,d.bZ)(c)}`,"OK")})}getImobilizadosContador(){let t=new f.C;t.id_empresa=this.empresa.id,t.id_filial=this.local.id,t.contador="S",this.globalService.setSpin(!0),this.inscricaoTotalImobilizados=this.imobilizadoService.getImobilizadosParametro_01(t).subscribe(i=>{this.globalService.setSpin(!1),this.total_produtos=i.total,0==this.total_produtos&&this.appSnackBar.openFailureSnackBar("Nunhum Produto Cadatrado!","OK"),this.resumo.patchValue({total_produtos:i.total}),this.getImoIvenContador()},i=>{this.globalService.setSpin(!1),this.total_produtos=0,this.total_produtos_anexados=0,this.total_produtos_anexar=0,this.appSnackBar.openFailureSnackBar("Nunhum Produto Cadatrado!","OK")})}getImoIvenContador(){let t=new T.E;t.id_empresa=this.empresa.id,t.id_filial=this.local.id,t.id_inventario=this.inventario.codigo,t.contador="S",this.globalService.setSpin(!0),this.inscricaoTotalAnexados=this.imoInventarioService.getImobilizadosinventariosParametro_01(t).subscribe(i=>{this.globalService.setSpin(!1),this.total_produtos_anexados=i.total,this.total_produtos_anexar=this.total_produtos-this.total_produtos_anexados,this.resumo.patchValue({total_produtos_anexados:this.total_produtos_anexados,total_produtos_anexar:this.total_produtos_anexar}),this.anexar=this.total_produtos_anexar>0,this.verificado=!0},i=>{this.globalService.setSpin(!1),this.total_produtos_anexados=0,this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Produtos De Invent\xe1rio ${(0,d.bZ)(i)}`,"OK")})}anexarProdutoInventario(){let t=new P;t.id_empresa=this.empresa.id,t.id_filial=this.local.id,t.id_inventario=this.inventario.codigo,this.globalService.setSpin(!0),this.inscricaoAnexar=this.imoInventarioService.anexarProdutoInventario(t).subscribe(i=>{this.globalService.setSpin(!1),this.verificado=!1,this.anexar=!1,this.appSnackBar.openSuccessSnackBar("Produtos Anexados Com Sucesso!","OK")},i=>{this.globalService.setSpin(!1),this.total_produtos_anexados=0,this.appSnackBar.openFailureSnackBar(`Falha Ao Anexar Produtos No Invent\xe1rio ${(0,d.bZ)(i)}`,"OK")})}setValues(){this.parametros.setValue({empresa:this.empresa.id,local:this.local.id,inventario:this.inventario.codigo})}setValuesResumo(){this.resumo.setValue({total_produtos:this.total_produtos,total_produtos_anexados:this.total_produtos_anexados,total_produtos_anexar:this.total_produtos_anexar})}onHome(){this.router.navigate([""])}onChangeEmpresa(){this.onGetLocais()}onChangeLocal(){let t=this.locais.findIndex(i=>{var n;return i.id===(null===(n=this.parametros.value)||void 0===n?void 0:n.local)});t>=0&&(this.local=this.locais[t],this.onGetInventarios())}onValidar(){this.getImobilizadosContador()}onProcessar(){this.anexarProdutoInventario()}onCancelar(){this.verificado=!1,this.anexar=!1}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(C.U),o.Y36(u.qu),o.Y36(I.P),o.Y36(z.C),o.Y36(U.I),o.Y36(O.i),o.Y36(E.J),o.Y36(m.F0),o.Y36(N.W))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-anexar-produtos"]],decls:28,vars:5,consts:[[1,"div-barra"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Retorno","matTooltipPosition","above",3,"click"],[1,"parametros","box"],["autocomplete","off",1,"col-med-4",3,"formGroup"],["field","","appearance","outline",1,"col-max"],["formControlName","empresa",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","local",3,"selectionChange"],["field","","appearance","outline",1,"column-span-2"],["formControlName","inventario"],[1,"button-container-right"],["mat-raised-button","","color","primary",3,"click"],["class","parametros box",4,"ngIf"],[3,"value"],["autocomplete","off",3,"formGroup"],[1,"col-med-3"],["appearance","outline",1,"col-max"],["matInput","","formControlName","total_produtos",3,"readonly"],["matInput","","formControlName","total_produtos_anexados",3,"readonly"],["matInput","","formControlName","total_produtos_anexar",3,"readonly"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,i){1&t&&(o.TgZ(0,"div",0),o.TgZ(1,"mat-toolbar"),o.TgZ(2,"span",1),o._uU(3,"Anexar Produtos Ao Invent\xe1rio:"),o.qZA(),o.TgZ(4,"button",2),o.NdJ("click",function(){return i.onHome()}),o.TgZ(5,"mat-icon"),o._uU(6,"home"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(7,"div",3),o.TgZ(8,"form",4),o.TgZ(9,"mat-form-field",5),o.TgZ(10,"mat-label"),o._uU(11,"Empresa"),o.qZA(),o.TgZ(12,"mat-select",6),o.NdJ("selectionChange",function(){return i.onChangeEmpresa()}),o.YNc(13,M,2,2,"mat-option",7),o.qZA(),o.qZA(),o.TgZ(14,"mat-form-field",5),o.TgZ(15,"mat-label"),o._uU(16,"Local"),o.qZA(),o.TgZ(17,"mat-select",8),o.NdJ("selectionChange",function(){return i.onChangeLocal()}),o.YNc(18,Y,2,2,"mat-option",7),o.qZA(),o.qZA(),o.TgZ(19,"mat-form-field",9),o.TgZ(20,"mat-label"),o._uU(21,"Invent\xe1rio"),o.qZA(),o.TgZ(22,"mat-select",10),o.YNc(23,D,2,2,"mat-option",7),o.qZA(),o.qZA(),o.qZA(),o.TgZ(24,"div",11),o.TgZ(25,"button",12),o.NdJ("click",function(){return i.onValidar()}),o._uU(26," Verificar "),o.qZA(),o.qZA(),o.qZA(),o.YNc(27,Q,21,5,"div",13)),2&t&&(o.xp6(8),o.Q6J("formGroup",i.parametros),o.xp6(5),o.Q6J("ngForOf",i.empresas),o.xp6(5),o.Q6J("ngForOf",i.locais),o.xp6(5),o.Q6J("ngForOf",i.inventarios),o.xp6(4),o.Q6J("ngIf",i.verificado))},directives:[L.Ye,J.lW,y.gM,$.Hw,u._Y,u.JL,u.sg,_.KE,_.hX,F.gD,u.JJ,u.u,p.sg,p.O5,R.ey,B.Nt,u.Fj],styles:[".coluna-cabec-gerador[_ngcontent-%COMP%]{background-color:#acb0b8;text-align:left;height:max-content}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2aa}tr[_ngcontent-%COMP%]:hover{background-color:#caa99d}.parametros[_ngcontent-%COMP%]{padding:10px;font-size:medium;color:#000}"]}),e})()}];let K=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[m.Bz.forChild(V)],m.Bz]}),e})();var q=a(4307),k=a(9243),j=a(4466),X=a(662);let H=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[p.ez,K,q.q,k.Cl,u.u5,u.UX,j.m,X.yI.forChild()]]}),e})()},1543:(Z,h,a)=>{a.d(h,{E:()=>p});class p{constructor(){this.id_empresa=0,this.id_filial=0,this.id_inventario=0,this.id_imobilizado=0,this.id_cc="",this.id_grupo=0,this.descricao="",this.observacao="",this.status=-1,this.new_cc="",this.new_codigo=0,this.id_usuario=0,this.origem="",this.condicao=0,this.book="",this.dtinicial="",this.dtfinal="",this.id_principal=0,this.pagina=0,this.tamPagina=50,this.contador="N",this.orderby="",this.sharp=!1}}},6288:(Z,h,a)=>{a.d(h,{J:()=>v});var p=a(2340),m=a(7716),A=a(1841);let v=(()=>{class l{constructor(s){this.http=s,this.apiURL=p.N.apiURL}getImobilizadosinventarios(){return this.http.get(`${this.apiURL}Imobilizadosinventarios`)}getImobilizadosinventariosParametro_01(s){return this.http.post(`${this.apiURL}imobilizadosinventarios`,s)}getImobilizadosinventariosFotos(s){return this.http.post(`${this.apiURL}imobilizadosinventariosfotos`,s)}getImobilizadoinventario(s,g,d,f){return this.http.get(`${this.apiURL}imobilizadoinventario/${s}/${g}/${d}/${f}`)}imobilizadoinventarioInsert(s){return this.http.post(`${this.apiURL}imobilizadoinventario`,s)}imobilizadoinventarioUpdate(s){return this.http.put(`${this.apiURL}imobilizadoinventario`,s)}imobilizadoinventarioDelete(s,g,d,f){return this.http.delete(`${this.apiURL}imobilizadoinventario/${s}/${g}/${d}/${f}`)}anexarProdutoInventario(s){return this.http.post(`${this.apiURL}anexarprodutoinventario`,s)}getExcelv2(s){return console.log(s),this.http.post(`${this.apiURL}imobilizadosinventariosexcelv2`,s)}}return l.\u0275fac=function(s){return new(s||l)(m.LFG(A.eN))},l.\u0275prov=m.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()}}]);
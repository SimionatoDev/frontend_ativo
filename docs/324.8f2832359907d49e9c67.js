"use strict";(self.webpackChunkinventario=self.webpackChunkinventario||[]).push([[324],{1543:(g,u,s)=>{s.d(u,{E:()=>c});class c{constructor(){this.id_empresa=0,this.id_filial=0,this.id_inventario=0,this.id_imobilizado=0,this.id_cc="",this.id_grupo=0,this.descricao="",this.observacao="",this.status=-1,this.new_cc="",this.new_codigo=0,this.id_usuario=0,this.origem="",this.condicao=0,this.book="",this.dtinicial="",this.dtfinal="",this.id_principal=0,this.pagina=0,this.tamPagina=50,this.contador="N",this.orderby="",this.sharp=!1}}},5330:(g,u,s)=>{s.d(u,{D:()=>c});class c{constructor(){this.id_empresa=0,this.id_filial=0,this.id_inventario=0,this.destinatario="",this.assunto="",this.mensagem="",this.fileName=""}}},9219:(g,u,s)=>{s.d(u,{j:()=>p});var c=s(2340),m=s(7716),h=s(1841);let p=(()=>{class t{constructor(n){this.http=n,this.apiURL=c.N.apiURL}sendEmailV2(n){return this.http.post(`${this.apiURL}enviaremailarquivo`,n)}}return t.\u0275fac=function(n){return new(n||t)(m.LFG(h.eN))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},6288:(g,u,s)=>{s.d(u,{J:()=>p});var c=s(2340),m=s(7716),h=s(1841);let p=(()=>{class t{constructor(n){this.http=n,this.apiURL=c.N.apiURL}getImobilizadosinventarios(){return this.http.get(`${this.apiURL}Imobilizadosinventarios`)}getImobilizadosinventariosParametro_01(n){return this.http.post(`${this.apiURL}imobilizadosinventarios`,n)}getImobilizadosinventariosFotos(n){return this.http.post(`${this.apiURL}imobilizadosinventariosfotos`,n)}getImobilizadoinventario(n,_,v,f){return this.http.get(`${this.apiURL}imobilizadoinventario/${n}/${_}/${v}/${f}`)}imobilizadoinventarioInsert(n){return this.http.post(`${this.apiURL}imobilizadoinventario`,n)}imobilizadoinventarioUpdate(n){return this.http.put(`${this.apiURL}imobilizadoinventario`,n)}imobilizadoinventarioDelete(n,_,v,f){return this.http.delete(`${this.apiURL}imobilizadoinventario/${n}/${_}/${v}/${f}`)}anexarProdutoInventario(n){return this.http.post(`${this.apiURL}anexarprodutoinventario`,n)}getExcelv2(n){return console.log(n),this.http.post(`${this.apiURL}imobilizadosinventariosexcelv2`,n)}}return t.\u0275fac=function(n){return new(n||t)(m.LFG(h.eN))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},9267:(g,u,s)=>{function c(m,h,p=!1){return t=>{let o="",n=!0;const _=t.value;return p||null!=_?p&&null==_||p&&0==_.length?{ValidatorStringLen:!0,message:"Dado Obrigat\xf3rio"}:p||0!=_.length?(m>0&&_.length<m&&(o=`Campo Dever\xe1 Ter No Minimo ${m} Caracteres.`,n=!1),h>0&&_.length>h&&(o=`Campo Dever\xe1 Ter No M\xe1ximo ${h} Caracteres.`,n=!1),n?null:{ValidatorStringLen:!0,message:o}):null:null}}s.d(u,{S:()=>c})},8656:(g,u,s)=>{s.d(u,{d:()=>m});var c=s(2653);class m{constructor(){this.titulo="Aten\xe7\xe3o",this.escopo="T",this.labelBottonSim="SIM",this.labelBottomNao="N\xc3O",this.resposta="",this.id_empresa=0,this.id_filial=0,this.id_inventario=0,this.pagina=0,this.parametro=new c.M}}},9617:(g,u,s)=>{s.d(u,{G:()=>U});var c=s(2238),m=s(1543),h=s(6809);class p{constructor(){this.id_empresa=0,this.id_filial=0,this.id_inventario=0,this.fileName=""}}var t=s(7716),o=s(3679),n=s(6288),_=s(2340),v=s(1841);let f=(()=>{class d{constructor(e){this.http=e,this.apiURL=_.N.apiURL}downLoadFile(e){return this.http.post(`${this.apiURL}downloadfile`,e)}urlDowLoad(e){return`${this.apiURL}downloadfile/${e.fileName}`}}return d.\u0275fac=function(e){return new(e||d)(t.LFG(v.eN))},d.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})();var O=s(789),E=s(8295),D=s(7441),T=s(8583),I=s(1095),P=s(6627),A=s(2458),Z=s(2178);function M(d,l){if(1&d&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&d){const e=l.$implicit;t.Q6J("value",e.sigla),t.xp6(1),t.hij(" ",e.descricao," ")}}function N(d,l){if(1&d&&(t.TgZ(0,"mat-label"),t._uU(1),t.qZA()),2&d){const e=t.oxw();t.xp6(1),t.Oqu(e.processando)}}function C(d,l){1&d&&t._UZ(0,"mat-progress-bar",14)}let U=(()=>{class d{constructor(e,i,a,r,b,S){this.formBuilder=e,this.dialogRef=i,this.imoInventarioService=a,this.fileService=r,this.appSnackBar=b,this.data=S,this.showSpin=!1,this.escopos=[{sigla:"T",descricao:"Toda Consulta"},{sigla:"P",descricao:"P\xe1gina Atual"}],this.processando="Aguardando Defini\xe7\xf5es",this.formulario=e.group({escopo:[{value:""}]})}ngOnInit(){this.data.resposta="N",this.setValue()}ngOnDestroy(){var e,i;null===(e=this.inscricaoDownLoad)||void 0===e||e.unsubscribe(),null===(i=this.inscricaoExcel)||void 0===i||i.unsubscribe()}closeModal(){this.dialogRef.close()}setValue(){this.formulario.setValue({escopo:this.data.escopo})}onProcessar(){this.formulario.valid?(this.data.escopo=this.formulario.value.escopo,this.GerarExcel()):(this.formulario.markAllAsTouched(),this.appSnackBar.openSuccessSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK"))}GerarExcel(){let e=new m.E;e.id_empresa=this.data.id_empresa,e.id_filial=this.data.id_filial,e.id_inventario=this.data.id_inventario,e=this.atualizaParametro(e),e.contador="N",e.pagina="T"==this.data.escopo?0:this.data.pagina,e.orderby="Imobilizado",this.processando="Gerando Consulta Em Excel!",this.showSpin=!0,this.inscricaoExcel=this.imoInventarioService.getExcelv2(e).subscribe(i=>{this.showSpin=!1,console.log(i),this.downLoad(i.filename)},i=>{this.showSpin=!1,this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Produtos De Invent\xe1rio ${(0,h.bZ)(i)}`,"OK")})}downLoad(e){let i=new p;i.id_empresa=this.data.id_empresa,i.id_filial=this.data.id_filial,i.id_inventario=this.data.id_inventario,i.fileName=e;const a=this.fileService.urlDowLoad(i);window.open(a),this.closeModal()}atualizaParametro(e){let i=this.data.parametro.getParametro(),a=0;return""!==Object(i).dtinicial&&(e.dtinicial=Object(i).dtinicial),""!==Object(i).dtfinal&&(e.dtfinal=Object(i).dtfinal),""!==Object(i).orderby&&(e.orderby=Object(i).orderby),""!==Object(i).cc.trim()&&(e.id_cc=Object(i).cc),""!==Object(i).cc_novo.trim()&&(e.new_cc=Object(i).cc_novo),a=parseInt(Object(i).id_grupo,10),e.id_grupo=isNaN(a)?0:a,a=parseInt(Object(i).situacao,10),e.status=isNaN(a)?0:a,a=parseInt(Object(i).codigo,10),e.id_imobilizado=isNaN(a)?0:a,a=parseInt(Object(i).novo,10),e.new_codigo=isNaN(a)?0:a,a=parseInt(Object(i).condicao,10),e.condicao=isNaN(a)?0:a,""!==Object(i).book.trim()&&(e.book=Object(i).book),""!==Object(i).descricao.trim()&&(e.descricao=Object(i).descricao),""!==Object(i).observacao.trim()&&(e.observacao=Object(i).observacao),a=parseInt(Object(i).executor,10),e.id_usuario=isNaN(a)?0:a,""!==Object(i).origem.trim()&&(e.origem=Object(i).origem),e}}return d.\u0275fac=function(e){return new(e||d)(t.Y36(o.qu),t.Y36(c.so),t.Y36(n.J),t.Y36(f),t.Y36(O.W),t.Y36(c.WI))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-download-dialog"]],decls:22,vars:7,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["autocomplete","off",3,"formGroup"],[1,"col-med-1"],["field","","appearance","outline",1,"col-max"],["formControlName","escopo"],[3,"value",4,"ngFor","ngForOf"],[1,"spin"],[4,"ngIf"],["mode","indeterminate",4,"ngIf"],[1,"button-container-right"],["mat-raised-button","","color","accent","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"click"],[3,"value"],["mode","indeterminate"]],template:function(e,i){1&e&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"form",2),t.TgZ(4,"div",3),t.TgZ(5,"mat-form-field",4),t.TgZ(6,"mat-label"),t._uU(7,"Situa\xe7\xe3o"),t.qZA(),t.TgZ(8,"mat-select",5),t.YNc(9,M,2,2,"mat-option",6),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",7),t.YNc(11,N,2,1,"mat-label",8),t.YNc(12,C,1,0,"mat-progress-bar",9),t.qZA(),t.qZA(),t.TgZ(13,"div",10),t.TgZ(14,"button",11),t.NdJ("click",function(){return i.closeModal()}),t.TgZ(15,"mat-icon"),t._uU(16,"cancel"),t.qZA(),t._uU(17),t.qZA(),t.TgZ(18,"button",12),t.NdJ("click",function(){return i.onProcessar()}),t.TgZ(19,"mat-icon"),t._uU(20,"check"),t.qZA(),t._uU(21),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Oqu(i.data.titulo),t.xp6(2),t.Q6J("formGroup",i.formulario),t.xp6(6),t.Q6J("ngForOf",i.escopos),t.xp6(2),t.Q6J("ngIf",i.showSpin),t.xp6(1),t.Q6J("ngIf",i.showSpin),t.xp6(5),t.hij(" ",i.data.labelBottomNao," "),t.xp6(4),t.hij(" ",i.data.labelBottonSim," "))},directives:[c.uh,c.xY,o._Y,o.JL,o.sg,E.KE,E.hX,D.gD,o.JJ,o.u,T.sg,T.O5,I.lW,P.Hw,A.ey,Z.pW],styles:["h1[_ngcontent-%COMP%]{text-align:left;font-family:Arial,Helvetica,sans-serif;font-size:x-large;color:#00f}.spin[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:20px;font-size:small}"]}),d})()},7360:(g,u,s)=>{s.d(u,{o:()=>m});var c=s(2653);class m{constructor(){this.titulo="Aten\xe7\xe3o",this.destinatario="",this.escopo="T",this.labelBottonSim="SIM",this.labelBottomNao="N\xc3O",this.resposta="",this.id_empresa=0,this.id_filial=0,this.id_inventario=0,this.pagina=0,this.parametro=new c.M}}},4838:(g,u,s)=>{s.d(u,{G:()=>d});var c=s(2238),m=s(9267),h=s(1543),p=s(6809),t=s(5330),o=s(7716),n=s(3679),_=s(9219),v=s(6288),f=s(789),O=s(8295),E=s(9983),D=s(8583),T=s(7441),I=s(1095),P=s(6627),A=s(2458),Z=s(2178);function M(l,e){if(1&l&&(o.TgZ(0,"mat-error"),o._uU(1),o.qZA()),2&l){const i=o.oxw();o.xp6(1),o.Oqu(i.getMensafield("destinatario"))}}function N(l,e){if(1&l&&(o.TgZ(0,"mat-option",15),o._uU(1),o.qZA()),2&l){const i=e.$implicit;o.Q6J("value",i.sigla),o.xp6(1),o.hij(" ",i.descricao," ")}}function C(l,e){if(1&l&&(o.TgZ(0,"mat-label"),o._uU(1),o.qZA()),2&l){const i=o.oxw();o.xp6(1),o.Oqu(i.processando)}}function U(l,e){1&l&&o._UZ(0,"mat-progress-bar",16)}let d=(()=>{class l{constructor(i,a,r,b,S,L){this.formBuilder=i,this.dialogRef=a,this.emailService=r,this.imoInventarioService=b,this.appSnackBar=S,this.data=L,this.showSpin=!1,this.escopos=[{sigla:"T",descricao:"Toda Consulta"},{sigla:"P",descricao:"P\xe1gina Atual"}],this.processando="Aguardando Defini\xe7\xf5es",this.formulario=i.group({destinatario:[{value:""},[(0,m.S)(1,500,!0)]],escopo:[{value:""}]})}ngOnInit(){this.data.resposta="N",this.setValue()}ngOnDestroy(){var i,a;null===(i=this.inscricaoEmail)||void 0===i||i.unsubscribe(),null===(a=this.inscricaoExcel)||void 0===a||a.unsubscribe()}closeModal(){this.dialogRef.close()}setValue(){this.formulario.setValue({destinatario:this.data.destinatario,escopo:this.data.escopo})}NoValidtouchedOrDirty(i){var a,r,b;return!((null===(a=this.formulario.get(i))||void 0===a?void 0:a.valid)||!(null===(r=this.formulario.get(i))||void 0===r?void 0:r.touched)&&!(null===(b=this.formulario.get(i))||void 0===b?void 0:b.dirty))}getMensafield(i){var a,r;return null===(r=null===(a=this.formulario.get(i))||void 0===a?void 0:a.errors)||void 0===r?void 0:r.message}onProcessar(){this.formulario.valid?(this.data.destinatario=this.formulario.value.destinatario,this.data.escopo=this.formulario.value.escopo,this.GerarExcel()):(this.formulario.markAllAsTouched(),this.appSnackBar.openSuccessSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK"))}GerarExcel(){let i=new h.E;i.id_empresa=this.data.id_empresa,i.id_filial=this.data.id_filial,i.id_inventario=this.data.id_inventario,i=this.atualizaParametro(i),i.contador="N",i.pagina="T"==this.data.escopo?0:this.data.pagina,i.orderby="Imobilizado",this.processando="Gerando Consulta Em Excel!",this.showSpin=!0,this.inscricaoExcel=this.imoInventarioService.getExcelv2(i).subscribe(a=>{this.showSpin=!1,this.sendMail(a.filename)},a=>{this.showSpin=!1,this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Produtos De Invent\xe1rio ${(0,p.bZ)(a)}`,"OK")})}atualizaParametro(i){let a=this.data.parametro.getParametro(),r=0;return""!==Object(a).cc&&(i.id_cc=Object(a).cc),""!==Object(a).cc_novo&&(i.new_cc=Object(a).cc_novo),r=parseInt(Object(a).id_grupo,10),i.id_grupo=isNaN(r)?0:r,r=parseInt(Object(a).situacao,10),i.status=isNaN(r)?0:r,r=parseInt(Object(a).codigo,10),i.id_imobilizado=isNaN(r)?0:r,r=parseInt(Object(a).novo,10),i.new_codigo=isNaN(r)?0:r,r=parseInt(Object(a).condicao,10),i.condicao=isNaN(r)?0:r,""!==Object(a).book.trim()&&(i.book=Object(a).book),""!==Object(a).descricao.trim()&&(i.descricao=Object(a).descricao),""!==Object(a).observacao.trim()&&(i.observacao=Object(a).observacao),r=parseInt(Object(a).executor,10),i.id_usuario=isNaN(r)?0:r,""!==Object(a).origem.trim()&&(i.origem=Object(a).origem),i}sendMail(i){let a=new t.D;a.id_empresa=this.data.id_empresa,a.id_filial=this.data.id_filial,a.id_inventario=this.data.id_inventario,a.assunto="Relat\xf3rio Dos Ativos Do Invent\xe1rio",a.destinatario=this.data.destinatario,a.mensagem="Mensagem enviada automaticamento por solicita\xe7\xe3o do usu\xe1rio. Favor Verificar Anexo.",a.fileName=i,this.processando="Enviando E-MAIL",this.showSpin=!0,this.inscricaoEmail=this.emailService.sendEmailV2(a).subscribe(r=>{this.showSpin=!1,this.appSnackBar.openSuccessSnackBar(r.message,"OK"),this.closeModal()},r=>{this.showSpin=!1,this.appSnackBar.openFailureSnackBar(`Falha Ao Enviar O E-Mail ${(0,p.bZ)(r)}`,"OK")})}}return l.\u0275fac=function(i){return new(i||l)(o.Y36(n.qu),o.Y36(c.so),o.Y36(_.j),o.Y36(v.J),o.Y36(f.W),o.Y36(c.WI))},l.\u0275cmp=o.Xpm({type:l,selectors:[["app-email-dialog"]],decls:28,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["autocomplete","off",3,"formGroup"],[1,"col-med-1"],["appearance","outline",1,"col-max"],["matInput","","formControlName","destinatario"],[4,"ngIf"],["field","","appearance","outline",1,"col-max"],["formControlName","escopo"],[3,"value",4,"ngFor","ngForOf"],[1,"spin"],["mode","indeterminate",4,"ngIf"],[1,"button-container-right"],["mat-raised-button","","color","accent","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"click"],[3,"value"],["mode","indeterminate"]],template:function(i,a){1&i&&(o.TgZ(0,"h1",0),o._uU(1),o.qZA(),o.TgZ(2,"div",1),o.TgZ(3,"form",2),o.TgZ(4,"div",3),o.TgZ(5,"mat-form-field",4),o.TgZ(6,"mat-label"),o._uU(7,"Destinat\xe1rios"),o.qZA(),o._UZ(8,"textarea",5),o.YNc(9,M,2,1,"mat-error",6),o.qZA(),o.qZA(),o.TgZ(10,"div",3),o.TgZ(11,"mat-form-field",7),o.TgZ(12,"mat-label"),o._uU(13,"Situa\xe7\xe3o"),o.qZA(),o.TgZ(14,"mat-select",8),o.YNc(15,N,2,2,"mat-option",9),o.qZA(),o.qZA(),o.qZA(),o.TgZ(16,"div",10),o.YNc(17,C,2,1,"mat-label",6),o.YNc(18,U,1,0,"mat-progress-bar",11),o.qZA(),o.qZA(),o.TgZ(19,"div",12),o.TgZ(20,"button",13),o.NdJ("click",function(){return a.closeModal()}),o.TgZ(21,"mat-icon"),o._uU(22,"cancel"),o.qZA(),o._uU(23),o.qZA(),o.TgZ(24,"button",14),o.NdJ("click",function(){return a.onProcessar()}),o.TgZ(25,"mat-icon"),o._uU(26,"check"),o.qZA(),o._uU(27),o.qZA(),o.qZA(),o.qZA()),2&i&&(o.xp6(1),o.Oqu(a.data.titulo),o.xp6(2),o.Q6J("formGroup",a.formulario),o.xp6(6),o.Q6J("ngIf",a.NoValidtouchedOrDirty("destinatario")),o.xp6(6),o.Q6J("ngForOf",a.escopos),o.xp6(2),o.Q6J("ngIf",a.showSpin),o.xp6(1),o.Q6J("ngIf",a.showSpin),o.xp6(5),o.hij(" ",a.data.labelBottomNao," "),o.xp6(4),o.hij(" ",a.data.labelBottonSim," "))},directives:[c.uh,c.xY,n._Y,n.JL,n.sg,O.KE,O.hX,E.Nt,n.Fj,n.JJ,n.u,D.O5,T.gD,D.sg,I.lW,P.Hw,O.TO,A.ey,Z.pW],styles:["h1[_ngcontent-%COMP%]{text-align:left;font-family:Arial,Helvetica,sans-serif;font-size:x-large;color:#00f}.spin[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:20px;font-size:small}"]}),l})()}}]);
"use strict";(self.webpackChunkinventario=self.webpackChunkinventario||[]).push([[346],{8786:(O,h,r)=>{r.d(h,{P:()=>s});class s{constructor(){this.id_empresa=0,this.id_filial=0,this.codigo="",this.descricao="",this.user_insert=0,this.user_update=0}}},604:(O,h,r)=>{r.d(h,{b:()=>s});class s{constructor(){this.id_empresa=0,this.id_filial=0,this.codigo=0,this.descricao="",this.user_insert=0,this.user_update=0}}},6407:(O,h,r)=>{r.d(h,{E:()=>t});var s=r(6809);class t{constructor(){this.id_empresa=0,this.id_filial=0,this.id_inventario=0,this.id_imobilizado=0,this.id_usuario=0,this.id_lanca=0,this.obs="",this.dtlanca=(0,s.zp)(new Date),this.estado=0,this.new_codigo=0,this.new_cc="",this.condicao=9,this.book="N",this.user_insert=0,this.user_update=0,this.imo_inv_status=0,this.inv_descricao="",this.imo_cod_cc="",this.imo_cod_grupo=0,this.imo_descricao="",this.usu_razao=""}}},2979:(O,h,r)=>{r.d(h,{D:()=>s});class s{constructor(){this.id_empresa=0,this.id_filial=0,this.codigo="",this.descricao="",this.pagina=0,this.tamPagina=50,this.contador="N",this.orderby="",this.sharp=!1}}},6924:(O,h,r)=>{r.d(h,{v:()=>s});class s{constructor(){this.id_empresa=0,this.id_local=0,this.id_inventario=0,this.id_imobilizado=0,this.id_pasta="",this.id_file="",this.file_name="",this.imobilizados=[],this.destaque="N",this.pagina=0,this.tamPagina=50,this.contador="N",this.orderby="",this.sharp=!1}}},2174:(O,h,r)=>{r.d(h,{t:()=>s});class s{constructor(){this.id_empresa=0,this.id_filial=0,this.codigo=0,this.descricao="",this.pagina=0,this.tamPagina=50,this.contador="N",this.orderby="",this.sharp=!1}}},1543:(O,h,r)=>{r.d(h,{E:()=>s});class s{constructor(){this.id_empresa=0,this.id_filial=0,this.id_inventario=0,this.id_imobilizado=0,this.id_cc="",this.id_grupo=0,this.descricao="",this.observacao="",this.status=-1,this.new_cc="",this.new_codigo=0,this.id_usuario=0,this.origem="",this.condicao=0,this.book="",this.dtinicial="",this.dtfinal="",this.pagina=0,this.tamPagina=50,this.contador="N",this.orderby="",this.sharp=!1}}},2704:(O,h,r)=>{r.d(h,{T:()=>v});var s=r(2340),t=r(7716),c=r(1841);let v=(()=>{class m{constructor(n){this.http=n,this.apiURL=s.N.apiURL}getCentroscustos(){return this.http.get(`${this.apiURL}Centroscustos`)}getCentroscustosParametro_01(n){return this.http.post(`${this.apiURL}centroscustos`,n)}getCentrocusto(n,g,u){return this.http.get(`${this.apiURL}centrocusto/${n}/${g}/${u}`)}centrocustoInsert(n){return this.http.post(`${this.apiURL}centrocusto`,n)}centrocustoUpdate(n){return this.http.put(`${this.apiURL}centrocusto`,n)}centrocustoDelete(n,g,u){return this.http.delete(`${this.apiURL}centrocusto/${n}/${g}/${u}`)}}return m.\u0275fac=function(n){return new(n||m)(t.LFG(c.eN))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},7535:(O,h,r)=>{r.d(h,{X:()=>v});var s=r(2340),t=r(7716),c=r(1841);let v=(()=>{class m{constructor(n){this.http=n,this.apiURL=s.N.apiURL}getFotos(){return this.http.get(`${this.apiURL}Fotos`)}getFotosParametro_01(n){return this.http.post(`${this.apiURL}fotos`,n)}getFoto(n,g,u,d,b,S,P){return this.http.get(`${this.apiURL}foto/${n}/${g}/${u}/${d}/${b}/${S}/${P}`)}fotoInsert(n){return this.http.post(`${this.apiURL}foto`,n)}fotoUpdate(n){return this.http.put(`${this.apiURL}foto`,n)}fotoDelete(n,g,u,d,b,S,P){return this.http.delete(`${this.apiURL}foto/${n}/${g}/${u}/${d}/${b}/${S}/${P}`)}}return m.\u0275fac=function(n){return new(n||m)(t.LFG(c.eN))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},7466:(O,h,r)=>{r.d(h,{Z:()=>v});var s=r(2340),t=r(7716),c=r(1841);let v=(()=>{class m{constructor(n){this.http=n,this.apiURL=s.N.apiURL}getGrupos(){return this.http.get(`${this.apiURL}Grupos`)}getGruposParametro_01(n){return this.http.post(`${this.apiURL}grupos`,n)}getGrupo(n,g,u){return this.http.get(`${this.apiURL}grupo/${n}/${g}/${u}`)}grupoInsert(n){return this.http.post(`${this.apiURL}grupo`,n)}grupoUpdate(n){return this.http.put(`${this.apiURL}grupo`,n)}grupoDelete(n,g,u){return this.http.delete(`${this.apiURL}grupo/${n}/${g}/${u}`)}}return m.\u0275fac=function(n){return new(n||m)(t.LFG(c.eN))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},6288:(O,h,r)=>{r.d(h,{J:()=>v});var s=r(2340),t=r(7716),c=r(1841);let v=(()=>{class m{constructor(n){this.http=n,this.apiURL=s.N.apiURL}getImobilizadosinventarios(){return this.http.get(`${this.apiURL}Imobilizadosinventarios`)}getImobilizadosinventariosParametro_01(n){return this.http.post(`${this.apiURL}imobilizadosinventarios`,n)}getImobilizadosinventariosFotos(n){return this.http.post(`${this.apiURL}imobilizadosinventariosfotos`,n)}getImobilizadoinventario(n,g,u,d){return this.http.get(`${this.apiURL}imobilizadoinventario/${n}/${g}/${u}/${d}`)}imobilizadoinventarioInsert(n){return this.http.post(`${this.apiURL}imobilizadoinventario`,n)}imobilizadoinventarioUpdate(n){return this.http.put(`${this.apiURL}imobilizadoinventario`,n)}imobilizadoinventarioDelete(n,g,u,d){return this.http.delete(`${this.apiURL}imobilizadoinventario/${n}/${g}/${u}/${d}`)}anexarProdutoInventario(n){return this.http.post(`${this.apiURL}anexarprodutoinventario`,n)}getExcelv2(n){return this.http.post(`${this.apiURL}imobilizadosinventariosexcelv2`,n)}}return m.\u0275fac=function(n){return new(n||m)(t.LFG(c.eN))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},9267:(O,h,r)=>{function s(t,c,v=!1){return m=>{let f="",n=!0;const g=m.value;return v||null!=g?v&&null==g||v&&0==g.length?{ValidatorStringLen:!0,message:"Dado Obrigat\xf3rio"}:v||0!=g.length?(t>0&&g.length<t&&(f=`Campo Dever\xe1 Ter No Minimo ${t} Caracteres.`,n=!1),c>0&&g.length>c&&(f=`Campo Dever\xe1 Ter No M\xe1ximo ${c} Caracteres.`,n=!1),n?null:{ValidatorStringLen:!0,message:f}):null:null}}r.d(h,{S:()=>s})},9631:(O,h,r)=>{function s(t,c){var v,m,f,n,g,u;try{let d=0;""!==(null===(v=Object(c).dtinicial)||void 0===v?void 0:v.trim())&&(t.dtinicial=Object(c).dtinicial),""!==(null===(m=Object(c).dtfinal)||void 0===m?void 0:m.trim())&&(t.dtfinal=Object(c).dtfinal),""!==(null===(f=Object(c).orderby)||void 0===f?void 0:f.trim())&&(t.orderby=Object(c).orderby),""!==Object(c).cc&&(t.id_cc=Object(c).cc),""!==Object(c).cc_novo&&(t.new_cc=Object(c).cc_novo),d=parseInt(Object(c).grupo,10),t.id_grupo=isNaN(d)?0:d,d=parseInt(Object(c).situacao,10),t.status=isNaN(d)?0:d,d=parseInt(Object(c).codigo,10),t.id_imobilizado=isNaN(d)?0:d,d=parseInt(Object(c).novo,10),t.new_codigo=isNaN(d)?0:d,d=parseInt(Object(c).condicao,10),t.condicao=isNaN(d)?0:d,""!==(null===(n=Object(c).book)||void 0===n?void 0:n.trim())&&(t.book=Object(c).book),""!==(null===(g=Object(c).descricao)||void 0===g?void 0:g.trim())&&(t.descricao=Object(c).descricao),""!==(null===(u=Object(c).observacao)||void 0===u?void 0:u.trim())&&(t.observacao=Object(c).observacao),d=parseInt(Object(c).executor,10),t.id_usuario=isNaN(d)?0:d,""!==Object(c).origem.trim()&&(t.origem=Object(c).origem)}catch(d){alert(d)}return t}r.d(h,{W:()=>s})},8117:(O,h,r)=>{r.d(h,{t:()=>s});class s{constructor(c,v){this.idx=0,this.fotos=[],this.idx=c,this.fotos=v}}},1606:(O,h,r)=>{r.d(h,{t:()=>s});class s{constructor(){this.sigla="",this.descricao=""}}},2607:(O,h,r)=>{r.d(h,{c:()=>g});var s=r(7716),t=r(8583),c=r(1769);function v(u,d){if(1&u&&(s.TgZ(0,"td"),s.TgZ(1,"div",4),s._UZ(2,"img",5),s.qZA(),s.qZA()),2&u){const b=s.oxw().$implicit;s.xp6(2),s.MGl("src","https://drive.google.com/thumbnail?id=",b.fotos[0].id_file,"&sz=w400",s.LSH)}}function m(u,d){if(1&u&&(s.TgZ(0,"td"),s.TgZ(1,"div",4),s._UZ(2,"img",5),s.qZA(),s.qZA()),2&u){const b=s.oxw().$implicit;s.xp6(2),s.MGl("src","https://drive.google.com/thumbnail?id=",b.fotos[1].id_file,"&sz=w400",s.LSH)}}function f(u,d){if(1&u&&(s.TgZ(0,"td"),s.TgZ(1,"div",4),s._UZ(2,"img",5),s.qZA(),s.qZA()),2&u){const b=s.oxw().$implicit;s.xp6(2),s.MGl("src","https://drive.google.com/thumbnail?id=",b.fotos[2].id_file,"&sz=w400",s.LSH)}}function n(u,d){if(1&u&&(s.TgZ(0,"tr"),s.YNc(1,v,3,1,"td",3),s.YNc(2,m,3,1,"td",3),s.YNc(3,f,3,1,"td",3),s.qZA()),2&u){const b=d.$implicit,S=s.oxw();s.xp6(1),s.Q6J("ngIf",S.itsOK(0,b)),s.xp6(1),s.Q6J("ngIf",S.itsOK(1,b)),s.xp6(1),s.Q6J("ngIf",S.itsOK(2,b))}}let g=(()=>{class u{constructor(){this.fotos=[]}ngOnInit(){}itsOK(b,S){return b<=S.fotos.length-1}}return u.\u0275fac=function(b){return new(b||u)},u.\u0275cmp=s.Xpm({type:u,selectors:[["app-browser-foto"]],inputs:{fotos:["FOTOS","fotos"]},decls:3,vars:1,consts:[[1,"Browse_Lanc"],[4,"ngFor","ngForOf"],[1,"material-devider"],[4,"ngIf"],[1,"alinha_esquerda"],[3,"src"]],template:function(b,S){1&b&&(s.TgZ(0,"table",0),s.YNc(1,n,4,3,"tr",1),s.qZA(),s._UZ(2,"mat-divider",2)),2&b&&(s.xp6(1),s.Q6J("ngForOf",S.fotos))},directives:[t.sg,c.d,t.O5],styles:[".material-devider[_ngcontent-%COMP%]{color:red;margin:5px}"]}),u})()},3174:(O,h,r)=>{r.d(h,{d:()=>$t});var s=r(3430),t=r(7716),c=r(8002),v=r(5435),m=r(4395),f=r(7519),n=r(3075),g=r(6407),u=r(4635),d=r(604),b=r(8786),S=r(1606),P=r(2979),V=r(2174),Z=r(6809),Q=r(5062),H=r(8495);class q{constructor(){this.id_empresa=0,this.id_filial=0,this.id_inventario=0,this.destinatario="",this.assunto="",this.mensagem="",this.fileName=""}}var A=r(2238),E=r(2653);class K{constructor(){this.titulo="Aten\xe7\xe3o",this.destinatario="",this.escopo="T",this.labelBottonSim="SIM",this.labelBottomNao="N\xc3O",this.resposta="",this.id_empresa=0,this.id_filial=0,this.id_inventario=0,this.pagina=0,this.parametro=new E.M}}var W=r(9267),J=r(1543),T=r(3679),k=r(2340),y=r(1841);let R=(()=>{class a{constructor(o){this.http=o,this.apiURL=k.N.apiURL}sendEmailV2(o){return this.http.post(`${this.apiURL}enviaremailarquivo`,o)}}return a.\u0275fac=function(o){return new(o||a)(t.LFG(y.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var B=r(6288),U=r(789),N=r(8295),Y=r(9983),I=r(8583),D=r(7441),F=r(1095),w=r(6627),L=r(2458),z=r(2178);function X(a,l){if(1&a&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&a){const o=t.oxw();t.xp6(1),t.Oqu(o.getMensafield("destinatario"))}}function tt(a,l){if(1&a&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&a){const o=l.$implicit;t.Q6J("value",o.sigla),t.xp6(1),t.hij(" ",o.descricao," ")}}function ot(a,l){if(1&a&&(t.TgZ(0,"mat-label"),t._uU(1),t.qZA()),2&a){const o=t.oxw();t.xp6(1),t.Oqu(o.processando)}}function it(a,l){1&a&&t._UZ(0,"mat-progress-bar",16)}let et=(()=>{class a{constructor(o,i,e,_,C,x){this.formBuilder=o,this.dialogRef=i,this.emailService=e,this.imoInventarioService=_,this.appSnackBar=C,this.data=x,this.showSpin=!1,this.escopos=[{sigla:"T",descricao:"Toda Consulta"},{sigla:"P",descricao:"P\xe1gina Atual"}],this.processando="Aguardando Defini\xe7\xf5es",this.formulario=o.group({destinatario:[{value:""},[(0,W.S)(1,500,!0)]],escopo:[{value:""}]})}ngOnInit(){this.data.resposta="N",this.setValue()}ngOnDestroy(){var o,i;null===(o=this.inscricaoEmail)||void 0===o||o.unsubscribe(),null===(i=this.inscricaoExcel)||void 0===i||i.unsubscribe()}closeModal(){this.dialogRef.close()}setValue(){this.formulario.setValue({destinatario:this.data.destinatario,escopo:this.data.escopo})}NoValidtouchedOrDirty(o){var i,e,_;return!((null===(i=this.formulario.get(o))||void 0===i?void 0:i.valid)||!(null===(e=this.formulario.get(o))||void 0===e?void 0:e.touched)&&!(null===(_=this.formulario.get(o))||void 0===_?void 0:_.dirty))}getMensafield(o){var i,e;return null===(e=null===(i=this.formulario.get(o))||void 0===i?void 0:i.errors)||void 0===e?void 0:e.message}onProcessar(){this.formulario.valid?(this.data.destinatario=this.formulario.value.destinatario,this.data.escopo=this.formulario.value.escopo,this.GerarExcel()):(this.formulario.markAllAsTouched(),this.appSnackBar.openSuccessSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK"))}GerarExcel(){let o=new J.E;o.id_empresa=this.data.id_empresa,o.id_filial=this.data.id_filial,o.id_inventario=this.data.id_inventario,o=this.atualizaParametro(o),o.contador="N",o.pagina="T"==this.data.escopo?0:this.data.pagina,o.orderby="Imobilizado",this.processando="Gerando Consulta Em Excel!",this.showSpin=!0,this.inscricaoExcel=this.imoInventarioService.getExcelv2(o).subscribe(i=>{this.showSpin=!1,this.sendMail(i.filename)},i=>{this.showSpin=!1,this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Produtos De Invent\xe1rio ${(0,Z.bZ)(i)}`,"OK")})}atualizaParametro(o){let i=this.data.parametro.getParametro(),e=0;return""!==Object(i).cc&&(o.id_cc=Object(i).cc),""!==Object(i).cc_novo&&(o.new_cc=Object(i).cc_novo),e=parseInt(Object(i).id_grupo,10),o.id_grupo=isNaN(e)?0:e,e=parseInt(Object(i).situacao,10),o.status=isNaN(e)?0:e,e=parseInt(Object(i).codigo,10),o.id_imobilizado=isNaN(e)?0:e,e=parseInt(Object(i).novo,10),o.new_codigo=isNaN(e)?0:e,e=parseInt(Object(i).condicao,10),o.condicao=isNaN(e)?0:e,""!==Object(i).book.trim()&&(o.book=Object(i).book),""!==Object(i).descricao.trim()&&(o.descricao=Object(i).descricao),""!==Object(i).observacao.trim()&&(o.observacao=Object(i).observacao),e=parseInt(Object(i).executor,10),o.id_usuario=isNaN(e)?0:e,""!==Object(i).origem.trim()&&(o.origem=Object(i).origem),o}sendMail(o){let i=new q;i.id_empresa=this.data.id_empresa,i.id_filial=this.data.id_filial,i.id_inventario=this.data.id_inventario,i.assunto="Relat\xf3rio Dos Ativos Do Invent\xe1rio",i.destinatario=this.data.destinatario,i.mensagem="Mensagem enviada automaticamento por solicita\xe7\xe3o do usu\xe1rio. Favor Verificar Anexo.",i.fileName=o,this.processando="Enviando E-MAIL",this.showSpin=!0,this.inscricaoEmail=this.emailService.sendEmailV2(i).subscribe(e=>{this.showSpin=!1,this.appSnackBar.openSuccessSnackBar(e.message,"OK"),this.closeModal()},e=>{this.showSpin=!1,this.appSnackBar.openFailureSnackBar(`Falha Ao Enviar O E-Mail ${(0,Z.bZ)(e)}`,"OK")})}}return a.\u0275fac=function(o){return new(o||a)(t.Y36(T.qu),t.Y36(A.so),t.Y36(R),t.Y36(B.J),t.Y36(U.W),t.Y36(A.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-email-dialog"]],decls:28,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["autocomplete","off",3,"formGroup"],[1,"col-med-1"],["appearance","outline",1,"col-max"],["matInput","","formControlName","destinatario"],[4,"ngIf"],["field","","appearance","outline",1,"col-max"],["formControlName","escopo"],[3,"value",4,"ngFor","ngForOf"],[1,"spin"],["mode","indeterminate",4,"ngIf"],[1,"button-container-right"],["mat-raised-button","","color","accent","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"click"],[3,"value"],["mode","indeterminate"]],template:function(o,i){1&o&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"form",2),t.TgZ(4,"div",3),t.TgZ(5,"mat-form-field",4),t.TgZ(6,"mat-label"),t._uU(7,"Destinat\xe1rios"),t.qZA(),t._UZ(8,"textarea",5),t.YNc(9,X,2,1,"mat-error",6),t.qZA(),t.qZA(),t.TgZ(10,"div",3),t.TgZ(11,"mat-form-field",7),t.TgZ(12,"mat-label"),t._uU(13,"Situa\xe7\xe3o"),t.qZA(),t.TgZ(14,"mat-select",8),t.YNc(15,tt,2,2,"mat-option",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(16,"div",10),t.YNc(17,ot,2,1,"mat-label",6),t.YNc(18,it,1,0,"mat-progress-bar",11),t.qZA(),t.qZA(),t.TgZ(19,"div",12),t.TgZ(20,"button",13),t.NdJ("click",function(){return i.closeModal()}),t.TgZ(21,"mat-icon"),t._uU(22,"cancel"),t.qZA(),t._uU(23),t.qZA(),t.TgZ(24,"button",14),t.NdJ("click",function(){return i.onProcessar()}),t.TgZ(25,"mat-icon"),t._uU(26,"check"),t.qZA(),t._uU(27),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(1),t.Oqu(i.data.titulo),t.xp6(2),t.Q6J("formGroup",i.formulario),t.xp6(6),t.Q6J("ngIf",i.NoValidtouchedOrDirty("destinatario")),t.xp6(6),t.Q6J("ngForOf",i.escopos),t.xp6(2),t.Q6J("ngIf",i.showSpin),t.xp6(1),t.Q6J("ngIf",i.showSpin),t.xp6(5),t.hij(" ",i.data.labelBottomNao," "),t.xp6(4),t.hij(" ",i.data.labelBottonSim," "))},directives:[A.uh,A.xY,T._Y,T.JL,T.sg,N.KE,N.hX,Y.Nt,T.Fj,T.JJ,T.u,I.O5,D.gD,I.sg,F.lW,w.Hw,N.TO,L.ey,z.pW],styles:["h1[_ngcontent-%COMP%]{text-align:left;font-family:Arial,Helvetica,sans-serif;font-size:x-large;color:#00f}.spin[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:20px;font-size:small}"]}),a})();class at{constructor(){this.titulo="Aten\xe7\xe3o",this.escopo="T",this.labelBottonSim="SIM",this.labelBottomNao="N\xc3O",this.resposta="",this.id_empresa=0,this.id_filial=0,this.id_inventario=0,this.pagina=0,this.parametro=new E.M}}class rt{constructor(){this.id_empresa=0,this.id_filial=0,this.id_inventario=0,this.fileName=""}}let st=(()=>{class a{constructor(o){this.http=o,this.apiURL=k.N.apiURL}downLoadFile(o){return this.http.post(`${this.apiURL}downloadfile`,o)}urlDowLoad(o){return`${this.apiURL}downloadfile/${o.fileName}`}}return a.\u0275fac=function(o){return new(o||a)(t.LFG(y.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function nt(a,l){if(1&a&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&a){const o=l.$implicit;t.Q6J("value",o.sigla),t.xp6(1),t.hij(" ",o.descricao," ")}}function ct(a,l){if(1&a&&(t.TgZ(0,"mat-label"),t._uU(1),t.qZA()),2&a){const o=t.oxw();t.xp6(1),t.Oqu(o.processando)}}function lt(a,l){1&a&&t._UZ(0,"mat-progress-bar",14)}let mt=(()=>{class a{constructor(o,i,e,_,C,x){this.formBuilder=o,this.dialogRef=i,this.imoInventarioService=e,this.fileService=_,this.appSnackBar=C,this.data=x,this.showSpin=!1,this.escopos=[{sigla:"T",descricao:"Toda Consulta"},{sigla:"P",descricao:"P\xe1gina Atual"}],this.processando="Aguardando Defini\xe7\xf5es",this.formulario=o.group({escopo:[{value:""}]})}ngOnInit(){this.data.resposta="N",this.setValue()}ngOnDestroy(){var o,i;null===(o=this.inscricaoDownLoad)||void 0===o||o.unsubscribe(),null===(i=this.inscricaoExcel)||void 0===i||i.unsubscribe()}closeModal(){this.dialogRef.close()}setValue(){this.formulario.setValue({escopo:this.data.escopo})}onProcessar(){this.formulario.valid?(this.data.escopo=this.formulario.value.escopo,this.GerarExcel()):(this.formulario.markAllAsTouched(),this.appSnackBar.openSuccessSnackBar("Formul\xe1rio Com Campos Inv\xe1lidos.","OK"))}GerarExcel(){let o=new J.E;o.id_empresa=this.data.id_empresa,o.id_filial=this.data.id_filial,o.id_inventario=this.data.id_inventario,o=this.atualizaParametro(o),o.contador="N",o.pagina="T"==this.data.escopo?0:this.data.pagina,o.orderby="Imobilizado",this.processando="Gerando Consulta Em Excel!",this.showSpin=!0,this.inscricaoExcel=this.imoInventarioService.getExcelv2(o).subscribe(i=>{this.showSpin=!1,console.log(i),this.downLoad(i.filename)},i=>{this.showSpin=!1,this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Produtos De Invent\xe1rio ${(0,Z.bZ)(i)}`,"OK")})}downLoad(o){let i=new rt;i.id_empresa=this.data.id_empresa,i.id_filial=this.data.id_filial,i.id_inventario=this.data.id_inventario,i.fileName=o;const e=this.fileService.urlDowLoad(i);window.open(e),this.closeModal()}atualizaParametro(o){let i=this.data.parametro.getParametro(),e=0;return""!==Object(i).cc&&(o.id_cc=Object(i).cc),""!==Object(i).cc_novo&&(o.new_cc=Object(i).cc_novo),e=parseInt(Object(i).id_grupo,10),o.id_grupo=isNaN(e)?0:e,e=parseInt(Object(i).situacao,10),o.status=isNaN(e)?0:e,e=parseInt(Object(i).codigo,10),o.id_imobilizado=isNaN(e)?0:e,e=parseInt(Object(i).novo,10),o.new_codigo=isNaN(e)?0:e,e=parseInt(Object(i).condicao,10),o.condicao=isNaN(e)?0:e,""!==Object(i).book.trim()&&(o.book=Object(i).book),""!==Object(i).descricao.trim()&&(o.descricao=Object(i).descricao),""!==Object(i).observacao.trim()&&(o.observacao=Object(i).observacao),e=parseInt(Object(i).executor,10),o.id_usuario=isNaN(e)?0:e,""!==Object(i).origem.trim()&&(o.origem=Object(i).origem),o}}return a.\u0275fac=function(o){return new(o||a)(t.Y36(T.qu),t.Y36(A.so),t.Y36(B.J),t.Y36(st),t.Y36(U.W),t.Y36(A.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-download-dialog"]],decls:22,vars:7,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["autocomplete","off",3,"formGroup"],[1,"col-med-1"],["field","","appearance","outline",1,"col-max"],["formControlName","escopo"],[3,"value",4,"ngFor","ngForOf"],[1,"spin"],[4,"ngIf"],["mode","indeterminate",4,"ngIf"],[1,"button-container-right"],["mat-raised-button","","color","accent","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary",3,"click"],[3,"value"],["mode","indeterminate"]],template:function(o,i){1&o&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"form",2),t.TgZ(4,"div",3),t.TgZ(5,"mat-form-field",4),t.TgZ(6,"mat-label"),t._uU(7,"Situa\xe7\xe3o"),t.qZA(),t.TgZ(8,"mat-select",5),t.YNc(9,nt,2,2,"mat-option",6),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",7),t.YNc(11,ct,2,1,"mat-label",8),t.YNc(12,lt,1,0,"mat-progress-bar",9),t.qZA(),t.qZA(),t.TgZ(13,"div",10),t.TgZ(14,"button",11),t.NdJ("click",function(){return i.closeModal()}),t.TgZ(15,"mat-icon"),t._uU(16,"cancel"),t.qZA(),t._uU(17),t.qZA(),t.TgZ(18,"button",12),t.NdJ("click",function(){return i.onProcessar()}),t.TgZ(19,"mat-icon"),t._uU(20,"check"),t.qZA(),t._uU(21),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.xp6(1),t.Oqu(i.data.titulo),t.xp6(2),t.Q6J("formGroup",i.formulario),t.xp6(6),t.Q6J("ngForOf",i.escopos),t.xp6(2),t.Q6J("ngIf",i.showSpin),t.xp6(1),t.Q6J("ngIf",i.showSpin),t.xp6(5),t.hij(" ",i.data.labelBottomNao," "),t.xp6(4),t.hij(" ",i.data.labelBottonSim," "))},directives:[A.uh,A.xY,T._Y,T.JL,T.sg,N.KE,N.hX,D.gD,T.JJ,T.u,I.sg,I.O5,F.lW,w.Hw,L.ey,z.pW],styles:["h1[_ngcontent-%COMP%]{text-align:left;font-family:Arial,Helvetica,sans-serif;font-size:x-large;color:#00f}.spin[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:20px;font-size:small}"]}),a})();var ut=r(3317),dt=r(454),ht=r(7466),pt=r(5626),gt=r(2704),_t=r(6081),vt=r(1436),ft=r(7539),bt=r(8981);function Zt(a,l){if(1&a){const o=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){return t.CHM(o),t.oxw().onGetExcelToEmailOrDownLoad("e-mail")}),t.TgZ(1,"mat-icon"),t._uU(2,"email"),t.qZA(),t.qZA()}}function Ct(a,l){if(1&a){const o=t.EpF();t.TgZ(0,"button",8),t.NdJ("click",function(){return t.CHM(o),t.oxw().onGetExcelToEmailOrDownLoad("download")}),t.TgZ(1,"mat-icon"),t._uU(2,"cloud_download"),t.qZA(),t.qZA()}}function Tt(a,l){if(1&a&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&a){const o=t.oxw(2);t.xp6(1),t.Oqu(o.getMensafield("dtinicial"))}}function xt(a,l){if(1&a&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&a){const o=t.oxw(2);t.xp6(1),t.Oqu(o.getMensafield("dtfinal"))}}function Ot(a,l){if(1&a&&(t.TgZ(0,"mat-option",37),t._uU(1),t.qZA()),2&a){const o=l.$implicit;t.Q6J("value",o.sigla),t.xp6(1),t.hij(" ",o.descricao," ")}}function St(a,l){if(1&a&&(t.TgZ(0,"mat-option",37),t._uU(1),t.qZA()),2&a){const o=l.$implicit;t.Q6J("value",o.codigo),t.xp6(1),t.hij(" ",o.descricao," ")}}function At(a,l){if(1&a&&(t.TgZ(0,"mat-option",37),t._uU(1),t.qZA()),2&a){const o=l.$implicit;t.Q6J("value",o.codigo),t.xp6(1),t.hij(" ",o.descricao," ")}}function Nt(a,l){if(1&a&&(t.TgZ(0,"mat-option",37),t._uU(1),t.qZA()),2&a){const o=l.$implicit;t.Q6J("value",o.codigo),t.xp6(1),t.hij(" ",o.descricao," ")}}function It(a,l){if(1&a&&(t.TgZ(0,"mat-option",37),t._uU(1),t.qZA()),2&a){const o=l.$implicit;t.Q6J("value",o.id),t.xp6(1),t.hij(" ",o.descricao," ")}}function Pt(a,l){if(1&a&&(t.TgZ(0,"mat-option",37),t._uU(1),t.qZA()),2&a){const o=l.$implicit;t.Q6J("value",o.sigla),t.xp6(1),t.hij(" ",o.descricao," ")}}function Et(a,l){if(1&a&&(t.TgZ(0,"mat-option",37),t._uU(1),t.qZA()),2&a){const o=l.$implicit;t.Q6J("value",o.id_usuario),t.xp6(1),t.hij(" ",o.razao," ")}}function Ut(a,l){if(1&a){const o=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).clearValue("codigo")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA()}}function Dt(a,l){if(1&a){const o=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).clearValue("novo")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA()}}function Ft(a,l){if(1&a&&(t.TgZ(0,"mat-option",37),t._uU(1),t.qZA()),2&a){const o=l.$implicit;t.Q6J("value",o.idx),t.xp6(1),t.hij(" ",o.descricao," ")}}function wt(a,l){if(1&a&&(t.TgZ(0,"mat-option",37),t._uU(1),t.qZA()),2&a){const o=l.$implicit;t.Q6J("value",o.sigla),t.xp6(1),t.hij(" ",o.descricao," ")}}function Lt(a,l){if(1&a){const o=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).clearValue("descricao")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA()}}function Mt(a,l){if(1&a){const o=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){return t.CHM(o),t.oxw(2).clearValue("observacao")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA()}}function jt(a,l){if(1&a){const o=t.EpF();t.TgZ(0,"form",9),t.TgZ(1,"div",10),t.TgZ(2,"mat-checkbox",11),t.NdJ("change",function(e){return t.CHM(o),t.oxw().onHoje(e)}),t._uU(3,"Hoje"),t.qZA(),t.TgZ(4,"mat-checkbox",12),t.NdJ("change",function(e){return t.CHM(o),t.oxw().onLimpar(e)}),t._uU(5,"Limpar As Datas"),t.qZA(),t.qZA(),t.TgZ(6,"div",13),t.TgZ(7,"mat-form-field",14),t.TgZ(8,"mat-label"),t._uU(9,"Data Inicial"),t.qZA(),t._UZ(10,"input",15),t.YNc(11,Tt,2,1,"mat-error",16),t.qZA(),t.TgZ(12,"mat-form-field",14),t.TgZ(13,"mat-label"),t._uU(14,"Data Final"),t.qZA(),t._UZ(15,"input",17),t.YNc(16,xt,2,1,"mat-error",16),t.qZA(),t.TgZ(17,"mat-form-field",18),t.TgZ(18,"mat-label"),t._uU(19,"Ordernado Por"),t.qZA(),t.TgZ(20,"mat-select",19),t.NdJ("selectionChange",function(){return t.CHM(o),t.oxw().onChangeParametros()}),t.YNc(21,Ot,2,2,"mat-option",20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",21),t.TgZ(23,"mat-form-field",22),t.TgZ(24,"mat-label"),t._uU(25,"Centro Custo"),t.qZA(),t.TgZ(26,"mat-select",23),t.NdJ("selectionChange",function(){return t.CHM(o),t.oxw().onChangeParametros()}),t.YNc(27,St,2,2,"mat-option",20),t.qZA(),t.qZA(),t.TgZ(28,"mat-form-field",22),t.TgZ(29,"mat-label"),t._uU(30,"Novo Centro Custo"),t.qZA(),t.TgZ(31,"mat-select",24),t.NdJ("selectionChange",function(){return t.CHM(o),t.oxw().onChangeParametros()}),t.YNc(32,At,2,2,"mat-option",20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"div",21),t.TgZ(34,"mat-form-field",22),t.TgZ(35,"mat-label"),t._uU(36,"Grupos"),t.qZA(),t.TgZ(37,"mat-select",25),t.NdJ("selectionChange",function(){return t.CHM(o),t.oxw().onChangeParametros()}),t.YNc(38,Nt,2,2,"mat-option",20),t.qZA(),t.qZA(),t.TgZ(39,"mat-form-field",22),t.TgZ(40,"mat-label"),t._uU(41,"Situa\xe7\xf5es"),t.qZA(),t.TgZ(42,"mat-select",26),t.NdJ("selectionChange",function(){return t.CHM(o),t.oxw().onChangeParametros()}),t.YNc(43,It,2,2,"mat-option",20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"div",21),t.TgZ(45,"mat-form-field",22),t.TgZ(46,"mat-label"),t._uU(47,"Origem"),t.qZA(),t.TgZ(48,"mat-select",27),t.NdJ("selectionChange",function(){return t.CHM(o),t.oxw().onChangeParametros()}),t.YNc(49,Pt,2,2,"mat-option",20),t.qZA(),t.qZA(),t.TgZ(50,"mat-form-field",22),t.TgZ(51,"mat-label"),t._uU(52,"Executores"),t.qZA(),t.TgZ(53,"mat-select",28),t.NdJ("selectionChange",function(){return t.CHM(o),t.oxw().onChangeParametros()}),t.YNc(54,Et,2,2,"mat-option",20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"div",13),t.TgZ(56,"mat-form-field",14),t.TgZ(57,"mat-label"),t._uU(58,"C\xf3digo"),t.qZA(),t._UZ(59,"input",29),t.YNc(60,Ut,3,0,"button",30),t.qZA(),t.TgZ(61,"mat-form-field",14),t.TgZ(62,"mat-label"),t._uU(63,"Novo"),t.qZA(),t._UZ(64,"input",31),t.YNc(65,Dt,3,0,"button",30),t.qZA(),t.TgZ(66,"mat-form-field",22),t.TgZ(67,"mat-label"),t._uU(68,"Condi\xe7\xe3o"),t.qZA(),t.TgZ(69,"mat-select",32),t.NdJ("selectionChange",function(){return t.CHM(o),t.oxw().onChangeParametros()}),t.YNc(70,Ft,2,2,"mat-option",20),t.qZA(),t.qZA(),t.TgZ(71,"mat-form-field",22),t.TgZ(72,"mat-label"),t._uU(73,"Book"),t.qZA(),t.TgZ(74,"mat-select",33),t.NdJ("selectionChange",function(){return t.CHM(o),t.oxw().onChangeParametros()}),t.YNc(75,wt,2,2,"mat-option",20),t.qZA(),t.qZA(),t.qZA(),t.TgZ(76,"div",34),t.TgZ(77,"mat-form-field",14),t.TgZ(78,"mat-label"),t._uU(79,"Descri\xe7\xe3o"),t.qZA(),t._UZ(80,"input",35),t.YNc(81,Lt,3,0,"button",30),t.qZA(),t.qZA(),t.TgZ(82,"div",34),t.TgZ(83,"mat-form-field",14),t.TgZ(84,"mat-label"),t._uU(85,"Observa\xe7\xe3o"),t.qZA(),t._UZ(86,"input",36),t.YNc(87,Mt,3,0,"button",30),t.qZA(),t.qZA(),t.qZA()}if(2&a){const o=t.oxw();t.Q6J("formGroup",o.parametros),t.xp6(11),t.Q6J("ngIf",o.NoValidtouchedOrDirty("dtinicial")),t.xp6(5),t.Q6J("ngIf",o.NoValidtouchedOrDirty("dtfinal")),t.xp6(5),t.Q6J("ngForOf",o.orderby),t.xp6(6),t.Q6J("ngForOf",o.ccs),t.xp6(5),t.Q6J("ngForOf",o.ccs_alterados),t.xp6(6),t.Q6J("ngForOf",o.grupos),t.xp6(5),t.Q6J("ngForOf",o.situacoesInventarioPar),t.xp6(6),t.Q6J("ngForOf",o.Origens),t.xp6(5),t.Q6J("ngForOf",o.executores),t.xp6(6),t.Q6J("ngIf",o.hasValue("codigo")),t.xp6(5),t.Q6J("ngIf",o.hasValue("novo")),t.xp6(5),t.Q6J("ngForOf",o.condicoes),t.xp6(5),t.Q6J("ngForOf",o.respostas),t.xp6(6),t.Q6J("ngIf",o.hasValue("descricao")),t.xp6(6),t.Q6J("ngIf",o.hasValue("observacao"))}}let $t=(()=>{class a{constructor(o,i,e,_,C,x,G,p,qt,Jt,kt){this.formBuilder=o,this.globalService=i,this.localStorageService=e,this.grupoService=_,this.parametrosService=C,this.centrocustoService=x,this.lancamentoService=G,this.emailService=p,this.appSnackBar=qt,this.EmailDialog=Jt,this.DownLoadDialog=kt,this.paramName="",this.retorno=!1,this.email=!1,this.download=!1,this.controle_paginas=new s.e(50,0),this.hide=!0,this.change=new t.vpe,this.changeHide=new t.vpe,this.grupos=[],this.ccs=[],this.ccs_alterados=[],this.condicoes=[],this.respostas=[],this.situacoesInventario=[],this.situacoesInventarioPar=[],this.Origens=[],this.usuarios=[],this.lancamento=new g.E,this.showFiltro=!0,this.executores=[],this.hideAcao="Ocultar",this.orderby=[{sigla:"001",descricao:"Ativo-Antigo"},{sigla:"002",descricao:"Ativo-Novo"},{sigla:"003",descricao:"CC-Antigo"},{sigla:"004",descricao:"CC-Novo"},{sigla:"005",descricao:"Grupo"},{sigla:"006",descricao:"Descri\xe7\xe3o"},{sigla:"007",descricao:"Observa\xe7\xe3o"},{sigla:"008",descricao:"Data Lan\xe7amento"}],this.parametro=new E.M,this.enable_filter=!0,this.parametros=o.group({hoje:[{value:""}],cleardate:[{value:""}],dtinicial:[{value:""}],dtfinal:[{value:""}],orderby:[{value:""}],ccs:[{value:""}],cc_novo:[{value:""}],grupos:[{value:""}],situacoes:[{value:""}],origem:[{value:""}],executor:[{value:""}],codigo:[{value:""}],novo:[{value:""}],condicao:[{value:""}],book:[{value:""}],descricao:[{value:""}],observacao:[{value:""}]}),this.situacoesInventario=this.globalService.getSituacoesInventario(),this.situacoesInventarioPar=this.globalService.getSituacoesInventarioPar(),this.condicoes=this.globalService.getCondicoes();const M=new S.t;M.sigla="",M.descricao="Todos";const j=new S.t;j.sigla="S",j.descricao="SIM";const $=new S.t;$.sigla="N",$.descricao="N\xc3O",this.respostas.push(M),this.respostas.push(j),this.respostas.push($),this.Origens.push(new n.x("","Todas")),this.Origens=[...this.Origens,...this.globalService.getOrigens()],this.setHide(),this.setValuesNoParam(),this.getExecutores(),this.getCentroCustos()}ngOnInit(){var o,i,e,_,C,x;this.localStorageService.getParametroModel(this.paramName),null===(o=this.parametros.get("dtinicial"))||void 0===o||o.valueChanges.pipe((0,c.U)(p=>p.trim()),(0,v.h)(p=>p.length>=10),(0,m.b)(350),(0,f.x)()).subscribe(p=>this.onChangeParametros()),null===(i=this.parametros.get("dtfinal"))||void 0===i||i.valueChanges.pipe((0,c.U)(p=>p.trim()),(0,v.h)(p=>p.length>=10),(0,m.b)(350),(0,f.x)()).subscribe(p=>this.onChangeParametros()),null===(e=this.parametros.get("codigo"))||void 0===e||e.valueChanges.pipe((0,c.U)(p=>p.trim()),(0,v.h)(p=>p.length>0),(0,m.b)(350),(0,f.x)()).subscribe(p=>this.onChangeParametros()),null===(_=this.parametros.get("novo"))||void 0===_||_.valueChanges.pipe((0,c.U)(p=>p.trim()),(0,v.h)(p=>p.length>0),(0,m.b)(350),(0,f.x)()).subscribe(p=>this.onChangeParametros()),null===(C=this.parametros.get("descricao"))||void 0===C||C.valueChanges.pipe((0,c.U)(p=>p.trim().toUpperCase()),(0,v.h)(p=>p.length>0),(0,m.b)(350),(0,f.x)()).subscribe(p=>{this.onChangeParametros()}),null===(x=this.parametros.get("observacao"))||void 0===x||x.valueChanges.pipe((0,c.U)(p=>p.trim().toUpperCase()),(0,v.h)(p=>p.length>0),(0,m.b)(350),(0,f.x)()).subscribe(p=>{this.onChangeParametros()})}ngOnDestroy(){var o,i,e,_,C,x;null===(o=this.inscricaoGetGrupo)||void 0===o||o.unsubscribe(),null===(i=this.inscricaoGetCc)||void 0===i||i.unsubscribe(),null===(e=this.inscricaoParametro)||void 0===e||e.unsubscribe(),null===(_=this.inscricaoExecutores)||void 0===_||_.unsubscribe(),null===(C=this.inscricaoExcel)||void 0===C||C.unsubscribe(),null===(x=this.inscricaoEmail)||void 0===x||x.unsubscribe()}getExecutores(){let o=new H.G;o.id_empresa=this.globalService.getEmpresa().id,o.id_filial=this.globalService.getLocal().id,o.id_inventario=this.globalService.getInventario().codigo,this.globalService.setSpin(!0),this.inscricaoExecutores=this.lancamentoService.resumolancamentos(o).subscribe(i=>{this.globalService.setSpin(!1);const e=new u.S;e.id_usuario=0,e.razao="Todos",this.executores.push(e),this.executores=[...this.executores,...i]},i=>{this.globalService.setSpin(!1);const e=new u.S;e.id_usuario=0,e.razao="Todos",this.executores.push(e)})}getCentroCustos(){let o=new P.D;o.id_empresa=this.globalService.getIdEmpresa(),o.id_filial=this.globalService.getLocal().id,o.orderby="Descri\xe7\xe3o",this.globalService.setSpin(!0),this.inscricaoGetCc=this.centrocustoService.getCentroscustosParametro_01(o).subscribe(i=>{this.globalService.setSpin(!1);const e=new b.P;e.codigo="",e.descricao="Todos",this.ccs=[],this.ccs_alterados=[],this.ccs.push(e);const _=new b.P;_.codigo="",_.descricao="Todos N\xe3o Alterados",this.ccs_alterados.push(_),i.forEach(C=>{var x=C.descricao.indexOf("-");x>=0&&(C.descricao=C.descricao.trim().substring(x+1)+" -> "+C.descricao.trim())}),i.sort((C,x)=>C.descricao<x.descricao?-1:C.descricao>x.descricao?1:0),this.ccs=[...this.ccs,...i],this.ccs_alterados=[...this.ccs_alterados,...i],this.getGrupos()},i=>{this.globalService.setSpin(!1),this.ccs=[],this.ccs_alterados=[],this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Grupos ${(0,Z.bZ)(i)}`,"OK")})}getGrupos(){let o=new V.t;o.id_empresa=this.globalService.getIdEmpresa(),o.id_filial=this.globalService.getLocal().id,o.orderby="Grupo",this.globalService.setSpin(!0),this.inscricaoGetGrupo=this.grupoService.getGruposParametro_01(o).subscribe(i=>{this.globalService.setSpin(!1);const e=new d.b;e.codigo=0,e.descricao="Todos",this.grupos=[],this.grupos.push(e),this.grupos=[...this.grupos,...i],this.loadParametros()},i=>{this.globalService.setSpin(!1),this.grupos=[],this.setValues(),this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Grupos ${(0,Z.bZ)(i)}`,"OK")})}onGetExcelToEmailOrDownLoad(o){"E-MAIL"==o.toUpperCase()?this.openEmailDialog():this.openDownLoadDialog()}sendMail(o){let i=new q;i.id_empresa=this.globalService.getIdEmpresa(),i.id_filial=this.globalService.getLocal().id,i.id_inventario=this.globalService.getInventario().codigo,i.assunto="Relat\xf3rio Dos Ativos Do Invent\xe1rio",i.destinatario=this.globalService.usuario.email,i.mensagem="Mensagem enviada automaticamento por solicita\xe7\xe3o do usu\xe1rio. Favor Verificar Anexo.",i.fileName=o,this.globalService.setSpin(!0),this.inscricaoEmail=this.emailService.sendEmailV2(i).subscribe(e=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar("E-Mail Enviado Com Sucesso!","OK")},e=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Produtos De Invent\xe1rio ${(0,Z.bZ)(e)}`,"OK")})}setValues(){var o,i;this.enable_filter=!1,this.parametros.setValue({hoje:!1,cleardate:!1,dtinicial:(0,Z.SL)(this.parametro.getParametro(),"dtinicial"),dtfinal:(0,Z.SL)(this.parametro.getParametro(),"dtfinal"),orderby:(0,Z.SL)(this.parametro.getParametro(),"orderby"),ccs:(0,Z.SL)(this.parametro.getParametro(),"cc"),cc_novo:(0,Z.SL)(this.parametro.getParametro(),"cc_novo"),grupos:(0,Z.P0)(this.parametro.getParametro(),"grupo"),situacoes:(0,Z.SL)(this.parametro.getParametro(),"situacao"),codigo:null===(o=(0,Z.P0)(this.parametro.getParametro(),"codigo"))||void 0===o?void 0:o.toString(),novo:null===(i=(0,Z.P0)(this.parametro.getParametro(),"novo"))||void 0===i?void 0:i.toString(),origem:(0,Z.SL)(this.parametro.getParametro(),"origem"),executor:(0,Z.P0)(this.parametro.getParametro(),"executor"),condicao:(0,Z.P0)(this.parametro.getParametro(),"condicao"),book:(0,Z.SL)(this.parametro.getParametro(),"book"),descricao:(0,Z.SL)(this.parametro.getParametro(),"descricao"),observacao:(0,Z.SL)(this.parametro.getParametro(),"observacao")}),this.enable_filter=!0}setValuesNoParam(){this.enable_filter=!1,this.parametros.setValue({hoje:!1,cleardate:!1,dtinicial:"",dtfinal:"",orderby:"001",ccs:"",cc_novo:"",grupos:0,situacoes:-1,codigo:"",novo:"",origem:"",executor:0,condicao:"0",book:"",descricao:"",observacao:""}),this.enable_filter=!0}setHide(){this.hide=!this.hide,this.hideAcao=this.hide?"Mostrar":"Ocultar"}loadParametros(){this.parametro=new E.M,this.parametro.id_empresa=this.globalService.getIdEmpresa(),this.parametro.modulo=this.paramName,this.parametro.assinatura="V1.00 19/09/2024",this.parametro.id_usuario=this.globalService.usuario.id,this.parametro.parametro='\n       {\n         "dtinicial":"",\n         "dtfinal":"",\n         "cc": "",\n         "cc_novo":"",\n         "grupo":0,\n         "situacao":-1,\n         "codigo":0,\n         "novo":0,\n         "origem":"",\n         "executor":0,\n         "condicao":0,\n         "book":"",\n         "descricao": "",\n         "observacao": "",\n         "dtinicial":"",\n         "dtfinal":"",\n         "orderby":"001",\n         "page": 1,\n         "new": false,\n         "id_retorno":0\n       }';const o=this.localStorageService.getParametroModel(this.paramName);null!==o?(this.parametro.load(o),this.setValues()):this.getParametro()}getParametro(){this.globalService.setSpin(!0);let o=new Q.E;o.id_empresa=this.parametro.id_empresa,o.modulo=this.parametro.modulo,o.assinatura=this.parametro.assinatura,o.id_usuario=this.parametro.id_usuario,o.orderby="Usu\xe1rio",console.log("pesquisa",o),this.inscricaoParametro=this.parametrosService.getParametrosParametro01(o).subscribe(i=>{this.globalService.setSpin(!1),this.parametro=new E.M,this.parametro.id_empresa=i[0].id_empresa,this.parametro.modulo=i[0].modulo,this.parametro.id_usuario=i[0].id_usuario,this.parametro.assinatura=i[0].assinatura,this.parametro.parametro=i[0].parametro,this.parametro.user_insert=i[0].user_insert,this.parametro.user_update=i[0].user_update,this.setValues(),this.onChangeParametros(!1)},i=>{this.globalService.setSpin(!1),this.setValuesNoParam(),this.onChangeParametros()})}updateParametros(){this.globalService.setSpin(!0),this.parametro.user_insert=this.globalService.usuario.id,this.parametro.user_update=this.globalService.usuario.id,this.refreshParametro(),this.inscricaoParametro=this.parametrosService.ParametroAtualiza(this.parametro).subscribe(o=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar("Par\xe2metros Atualizados","OK")},o=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Grava\xe7\xe3o Dos Parametros ${(0,Z.bZ)(o)}`,"OK")})}refreshParametro(o=!0){let i=this.parametro.getParametro();Object(i).cc=this.parametros.value.ccs,Object(i).cc_novo=this.parametros.value.cc_novo,Object(i).grupo=this.parametros.value.grupos,Object(i).situacao=this.parametros.value.situacoes,Object(i).codigo=this.parametros.value.codigo,Object(i).novo=this.parametros.value.novo,Object(i).origem=this.parametros.value.origem,Object(i).executor=this.parametros.value.executor,Object(i).condicao=this.parametros.value.condicao,Object(i).book=this.parametros.value.book,Object(i).descricao=this.parametros.value.descricao.toUpperCase(),Object(i).observacao=this.parametros.value.observacao.toUpperCase(),Object(i).dtinicial=this.parametros.value.dtinicial,Object(i).dtfinal=this.parametros.value.dtfinal,Object(i).orderby=this.parametros.value.orderby,this.parametro.parametro=JSON.stringify(i)}onChangeParametros(o=!0){this.refreshParametro(o),this.enable_filter&&this.change.emit(this.parametro)}onSaveConfig(){this.updateParametros()}onHide(){this.setHide(),this.changeHide.emit(this.hide)}hasValue(o){var i;return""!=(null===(i=this.parametros.get(o))||void 0===i?void 0:i.value)}clearValue(o){"descricao"==o&&this.parametros.patchValue({descricao:""}),"observacao"==o&&this.parametros.patchValue({observacao:""}),"codigo"==o&&this.parametros.patchValue({codigo:""}),"novo"==o&&this.parametros.patchValue({novo:""}),this.onChangeParametros()}ChangeValue(o,i){"descricao"==o&&this.parametros.patchValue({descricao:i}),"observacao"==o&&this.parametros.patchValue({observacao:i})}openEmailDialog(){const o=new K;o.titulo="ENVIAR CONSULTA VIA E-MAIL",o.destinatario=this.globalService.usuario.email,o.escopo="T",o.labelBottomNao="Cancelar",o.labelBottonSim="Processar",o.id_empresa=this.globalService.empresa.id,o.id_filial=this.globalService.local.id,o.id_inventario=this.globalService.inventario.codigo,o.pagina=this.controle_paginas.getPaginalAtual(),o.parametro=this.parametro;const i=new A.vA;i.disableClose=!0,i.id="consulta-email",i.width="800px",i.data=o,this.EmailDialog.open(et,i).beforeClosed().subscribe(_=>{})}openDownLoadDialog(){console.log("Pagina: ",this.controle_paginas.getPaginalAtual());const o=new at;o.titulo="DOWNLOAD DE CONSULTA",o.escopo="T",o.labelBottomNao="Cancelar",o.labelBottonSim="Processar",o.id_empresa=this.globalService.empresa.id,o.id_filial=this.globalService.local.id,o.id_inventario=this.globalService.inventario.codigo,o.pagina=this.controle_paginas.getPaginalAtual(),o.parametro=this.parametro;const i=new A.vA;i.disableClose=!0,i.id="consulta-download",i.width="800px",i.data=o,this.DownLoadDialog.open(mt,i).beforeClosed().subscribe(_=>{})}NoValidtouchedOrDirty(o){var i,e,_;return!((null===(i=this.parametros.get(o))||void 0===i?void 0:i.valid)||!(null===(e=this.parametros.get(o))||void 0===e?void 0:e.touched)&&!(null===(_=this.parametros.get(o))||void 0===_?void 0:_.dirty))}getMensafield(o){var i,e;return null===(e=null===(i=this.parametros.get(o))||void 0===i?void 0:i.errors)||void 0===e?void 0:e.message}onHoje(o){if(o.checked){let i=new Date(Date.now()).toLocaleString().split(",")[0];this.parametros.patchValue({dtinicial:i,dtfinal:i,hoje:!1}),this.onChangeParametros()}}onLimpar(o){o.checked&&this.parametros.patchValue({dtinicial:"",dtfinal:"",cleardate:!1}),this.onChangeParametros()}}return a.\u0275fac=function(o){return new(o||a)(t.Y36(T.qu),t.Y36(ut.U),t.Y36(dt.n),t.Y36(ht.Z),t.Y36(pt.u),t.Y36(gt.T),t.Y36(_t.l),t.Y36(R),t.Y36(U.W),t.Y36(A.uw),t.Y36(A.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-filtro-imoinventario"]],inputs:{paramName:["PARAMNAME","paramName"],retorno:["RETORNO","retorno"],email:["EMAIL","email"],download:["DOWNLOAD","download"],controle_paginas:["CONTROLE_PAGINAS","controle_paginas"],hide:["HIDE","hide"]},outputs:{change:"changeParametro",changeHide:"changeHide"},decls:12,vars:3,consts:[[1,"div-barra"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Salvar Par\xe2metros","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Enviar Consulta Por E-Mail","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Baixar A Consulta","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Mostrar/Esconder","matTooltipPosition","above",3,"click"],["autocomplete","off",3,"formGroup",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Enviar Consulta Por E-Mail","matTooltipPosition","above",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Baixar A Consulta","matTooltipPosition","above",3,"click"],["autocomplete","off",3,"formGroup"],[1,"check"],["formControlName","hoje",1,"check-margem",3,"change"],["formControlName","cleardate",1,"check-margem",3,"change"],[1,"col-med-4"],["appearance","outline",1,"col-max"],["matInput","","formControlName","dtinicial","mask","00/00/0000","placeholder","dd/mm/aaaa"],[4,"ngIf"],["matInput","","formControlName","dtfinal","mask","00/00/0000","placeholder","dd/mm/aaaa"],["field","","appearance","outline",1,"column-span-2"],["formControlName","orderby",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-med-2"],["field","","appearance","outline",1,"col-max"],["formControlName","ccs",3,"selectionChange"],["formControlName","cc_novo",3,"selectionChange"],["formControlName","grupos",3,"selectionChange"],["formControlName","situacoes",3,"selectionChange"],["formControlName","origem",3,"selectionChange"],["formControlName","executor",3,"selectionChange"],["matInput","","formControlName","codigo"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matInput","","formControlName","novo"],["formControlName","condicao",3,"selectionChange"],["formControlName","book",3,"selectionChange"],[1,"col-med-1"],["matInput","","formControlName","descricao",1,"uppercase"],["matInput","","formControlName","observacao",1,"uppercase"],[3,"value"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"span",1),t._uU(2,"Filtro Da Pesquisa"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return i.onSaveConfig()}),t.TgZ(4,"mat-icon"),t._uU(5,"brightness_high"),t.qZA(),t.qZA(),t.YNc(6,Zt,3,0,"button",3),t.YNc(7,Ct,3,0,"button",4),t.TgZ(8,"button",5),t.NdJ("click",function(){return i.onHide()}),t.TgZ(9,"mat-icon"),t._uU(10,"remove_red_eye"),t.qZA(),t.qZA(),t.qZA(),t.YNc(11,jt,88,16,"form",6)),2&o&&(t.xp6(6),t.Q6J("ngIf",i.email),t.xp6(1),t.Q6J("ngIf",i.download),t.xp6(4),t.Q6J("ngIf",!i.hide))},directives:[F.lW,vt.gM,w.Hw,I.O5,T._Y,T.JL,T.sg,ft.oG,T.JJ,T.u,N.KE,N.hX,Y.Nt,T.Fj,bt.hx,D.gD,I.sg,N.TO,L.ey,N.R9],styles:[".ckeck[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;height:60px}.check-margem[_ngcontent-%COMP%]{margin:0 10px}"]}),a})()}}]);
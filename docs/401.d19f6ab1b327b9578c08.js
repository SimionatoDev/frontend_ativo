"use strict";(self.webpackChunkinventario=self.webpackChunkinventario||[]).push([[401],{2653:(f,g,a)=>{a.d(g,{M:()=>i});class i{constructor(){this.id_empresa=0,this.modulo="",this.assinatura="",this.id_usuario=0,this.parametro="",this.user_insert=0,this.user_update=0}load(s){this.id_empresa=s.id_empresa,this.modulo=s.modulo,this.assinatura=s.assinatura,this.id_usuario=s.id_usuario,this.parametro=s.parametro,this.user_insert=s.user_insert,this.user_update=s.user_update}getParametro(){try{return JSON.parse(this.parametro)}catch(s){return JSON.parse('{"mensagem":"error"}')}}setParametro(s){this.parametro=JSON.stringify(s)}}},9128:(f,g,a)=>{a.r(g),a.d(g,{ConsultaFotoModule:()=>W});var i=a(8583),m=a(4655),s=a(2653),c=a(3430),u=a(1543),v=a(6809),r=a(6924),p=a(8117),h=a(9631),t=a(7716),Z=a(789),C=a(3317),F=a(6288),S=a(7535),I=a(2522),E=a(3968),O=a(1095),M=a(1436),N=a(6627),U=a(3174),w=a(8295),x=a(2607);function R(e,d){if(1&e&&(t.TgZ(0,"i"),t.TgZ(1,"div",9),t.TgZ(2,"mat-label",10),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"div",9),t.TgZ(5,"mat-label",10),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"div",9),t.TgZ(8,"mat-label",10),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"div"),t._UZ(11,"app-browser-foto",11),t.qZA(),t.qZA()),2&e){const o=d.$implicit,n=t.oxw(2);t.xp6(3),t.lnq("C\xf3digo Antigo: ",o.id_imobilizado," C\xf3digo Novo: ",o.new_codigo," Ativo:",o.imo_descricao,""),t.xp6(3),t.hij("Ativo:",o.imo_descricao,""),t.xp6(3),t.hij("Obs:",o.lanc_obs,""),t.xp6(2),t.Q6J("FOTOS",n.getFotosAtivo(o.id_imobilizado))}}function L(e,d){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"ul"),t.YNc(2,R,12,6,"i",8),t.qZA(),t.qZA()),2&e){const o=t.oxw();t.xp6(2),t.Q6J("ngForOf",o.imoinv)}}function J(e,d){if(1&e){const o=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t._uU(3,"Consulta De Fotos"),t.qZA(),t.TgZ(4,"app-navegator",2),t.NdJ("changePage",function(){return t.CHM(o),t.oxw().onChangePage()}),t.qZA(),t.TgZ(5,"button",12),t.NdJ("click",function(){return t.CHM(o),t.oxw().onTopoPagina()}),t.TgZ(6,"mat-icon"),t._uU(7,"arrow_upward"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=t.oxw();t.xp6(4),t.Q6J("controle",o.controlePaginas)}}const D=[{path:"",redirectTo:"consulta_fotos",pathMatch:"full"},{path:"consulta_fotos",component:(()=>{class e{constructor(o,n,l,P,A){this.appSnackBar=o,this.globalService=n,this.imoInventarioService=l,this.fotoService=P,this.router=A,this.tamPagina=50,this.controlePaginas=new c.e(this.tamPagina,this.tamPagina),this.parametro=new s.M,this.imoinv=[],this.listaAtivos=[],this.fotos=[],this.hide=!1}ngOnInit(){}ngOnDestroy(){var o,n;null===(o=this.inscricaoGetAll)||void 0===o||o.unsubscribe(),null===(n=this.inscricaoFoto)||void 0===n||n.unsubscribe(),this.globalService.estadoDelete(this.parametro)}filtrarAtivos(){this.listaAtivos=[],this.imoinv.forEach(o=>{0==this.listaAtivos.filter(l=>l==o.id_imobilizado).length&&this.listaAtivos.push(o.id_imobilizado)})}getFotos(){let o=new r.v;o.id_empresa=this.globalService.getIdEmpresa(),o.id_local=this.globalService.getLocal().id,o.id_inventario=this.globalService.getInventario().codigo,o.imobilizados=this.listaAtivos,o.contador="N",this.globalService.setSpin(!0),this.inscricaoFoto=this.fotoService.getFotosParametro_01(o).subscribe(n=>{this.globalService.setSpin(!1),this.fotos=n},n=>{this.globalService.setSpin(!1),this.fotos=[],this.appSnackBar.openFailureSnackBar(`Pesquisa Nas Fotos  ${(0,v.bZ)(n)}`,"OK")})}getFotosAtivo(o){let n=[],l=1,P=0;if(0==this.fotos.length)return n;let A=this.fotos.filter(T=>T.id_imobilizado==o),_=new p.t(l,[]);return A.length>0&&(A.forEach(T=>{3==P&&(n.push(_),P=0,l++,_=new p.t(l,[])),_.fotos.push(T),P++}),_.fotos.length>0&&n.push(_)),n}getImoIven(){let o=new u.E;o.id_empresa=this.globalService.getIdEmpresa(),o.id_filial=this.globalService.getLocal().id,o.id_inventario=this.globalService.getInventario().codigo,o=(0,h.W)(o,this.parametro.getParametro()),o.contador="N",o.tamPagina=this.tamPagina,o.pagina=this.controlePaginas.getPaginalAtual(),this.fotos=[],this.listaAtivos=[],this.globalService.setSpin(!0),this.inscricaoGetAll=this.imoInventarioService.getImobilizadosinventariosFotos(o).subscribe(n=>{this.globalService.setSpin(!1),this.imoinv=n,this.filtrarAtivos(),this.getFotos()},n=>{this.globalService.setSpin(!1),this.imoinv=[],this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Produtos De Invent\xe1rio ${(0,v.bZ)(n)}`,"OK")})}getImoIvenContador(){let o=new u.E;o.id_empresa=this.globalService.getIdEmpresa(),o.id_filial=this.globalService.getLocal().id,o.id_inventario=this.globalService.getInventario().codigo,o=(0,h.W)(o,this.parametro.getParametro()),o.contador="S",o.tamPagina=this.tamPagina,console.log(o),this.globalService.setSpin(!0),this.inscricaoGetAll=this.imoInventarioService.getImobilizadosinventariosFotos(o).subscribe(n=>{if(this.globalService.setSpin(!1),0==n.total)return this.imoinv=[],void(this.controlePaginas=new c.e(this.tamPagina,1));this.controlePaginas=new c.e(this.tamPagina,0==n.total?1:n.total),n.total>0&&this.getImoIven()},n=>{this.globalService.setSpin(!1),this.imoinv=[],this.controlePaginas=new c.e(this.tamPagina,1)})}onChangePage(){this.getImoIven()}onChangeParametros(o){console.log("change chamdo",o),this.parametro=o,this.getImoIvenContador()}onHome(){this.router.navigate([""])}onTopoPagina(){this.poscionaWindow(0,0)}poscionaWindow(o,n){window.scrollTo(o,n)}onChangeHide(o){this.hide=o}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(Z.W),t.Y36(C.U),t.Y36(F.J),t.Y36(S.X),t.Y36(m.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-foto-view"]],decls:14,vars:5,consts:[[1,"div-barra"],[1,"example-spacer"],[3,"controle","changePage"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Atualizar","matTooltipPosition","above",1,"example-icon",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Retorno","matTooltipPosition","above",3,"click"],["PARAMNAME","paramimoinv",3,"HIDE","CONTROLE_PAGINAS","changeParametro","changeHide"],[4,"ngIf"],["class","div-barra",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"alinha_esquerda"],[1,"Browse_Lanc_td"],[3,"FOTOS"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Topo Da P\xe1gina","matTooltipPosition","above",1,"example-icon",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t._uU(3,"Consulta De Fotos"),t.qZA(),t.TgZ(4,"app-navegator",2),t.NdJ("changePage",function(){return n.onChangePage()}),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return n.getImoIvenContador()}),t.TgZ(6,"mat-icon"),t._uU(7,"rotate_right"),t.qZA(),t.qZA(),t.TgZ(8,"button",4),t.NdJ("click",function(){return n.onHome()}),t.TgZ(9,"mat-icon"),t._uU(10,"home"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"app-filtro-imoinventario",5),t.NdJ("changeParametro",function(P){return n.onChangeParametros(P)})("changeHide",function(P){return n.onChangeHide(P)}),t.qZA(),t.YNc(12,L,3,1,"div",6),t.YNc(13,J,8,1,"div",7)),2&o&&(t.xp6(4),t.Q6J("controle",n.controlePaginas),t.xp6(7),t.Q6J("HIDE",n.hide)("CONTROLE_PAGINAS",n.controlePaginas),t.xp6(1),t.Q6J("ngIf",n.fotos.length>0&&n.listaAtivos.length>0),t.xp6(1),t.Q6J("ngIf",n.fotos.length>0&&n.listaAtivos.length>0))},directives:[I.Ye,E.J,O.lW,M.gM,N.Hw,U.d,i.O5,i.sg,w.hX,x.c],styles:["ul[_ngcontent-%COMP%]{list-style-position:inside;padding-left:0}"]}),e})()}];let y=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.Bz.forChild(D)],m.Bz]}),e})();var $=a(7666),z=a(9243),b=a(3679),B=a(4466),V=a(8981);let W=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[i.ez,y,$.q,z.Cl,b.u5,b.UX,B.m,V.yI.forChild()]]}),e})()},5062:(f,g,a)=>{a.d(g,{E:()=>i});class i{constructor(){this.id_empresa=0,this.modulo="",this.assinatura="",this.id_usuario=0,this.pagina=0,this.tamPagina=50,this.contador="N",this.orderby="",this.sharp=!1}}},5626:(f,g,a)=>{a.d(g,{u:()=>c});var i=a(2340),m=a(7716),s=a(1841);let c=(()=>{class u{constructor(r){this.http=r,this.apiURL=i.N.apiURL}getParametros(){return this.http.get(`${this.apiURL}parametros`)}getParametrosParametro01(r){return this.http.post(`${this.apiURL}parametros`,r)}getParametro(r,p,h,t){return this.http.get(`${this.apiURL}parametro/${r}/${p}/${h}/${t}`)}ParametroInsert(r){return this.http.post(`${this.apiURL}parametro/`,r)}ParametroUpdate(r){return this.http.put(`${this.apiURL}parametro/`,r)}ParametroAtualiza(r){return this.http.post(`${this.apiURL}atualizarparametro/`,r)}ParametroDelete(r,p,h,t){return this.http.delete(`${this.apiURL}parametro/${r}/${p}/${h}/${t}`)}ParametroInstallKey(){return this.http.post(`${this.apiURL}fotokey`,{chave:"nada"})}}return u.\u0275fac=function(r){return new(r||u)(m.LFG(s.eN))},u.\u0275prov=m.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},3430:(f,g,a)=>{a.d(g,{e:()=>i});class i{constructor(s,c){this.tamPagina=s,this.totalRegistros=c,this.paginaInicial=1,this.paginaFinal=1,this.totalPaginas=1,this.setTamPagina(this.tamPagina),this.paginaAtual=1}goFirst(){return this.paginaAtual=this.paginaInicial,this.paginaAtual}goLast(){return this.paginaAtual=this.paginaFinal,this.paginaAtual}nextPage(){this.paginaAtual++,this.paginaAtual>this.paginaFinal&&(this.paginaAtual=this.paginaFinal)}forwardPage(){this.paginaAtual--,this.paginaAtual<1&&(this.paginaAtual=1)}getPaginalAtual(){return this.paginaAtual}getTotalPaginas(){return this.totalPaginas}setTamPagina(s){this.tamPagina=s,this.totalPaginas=this.totalRegistros%this.tamPagina==0?Math.trunc(this.totalRegistros/this.tamPagina):Math.trunc(this.totalRegistros/this.tamPagina)+1,this.paginaFinal=this.totalPaginas}setPaginaAtual(s){this.paginaAtual=s}start(){this.paginaInicial=1,this.paginaFinal=1,this.totalPaginas=1,this.paginaAtual=1}}},3968:(f,g,a)=>{a.d(g,{J:()=>u});var i=a(7716),m=a(1095),s=a(1436),c=a(6627);let u=(()=>{class v{constructor(){this.change=new i.vpe}ngOnInit(){}getAtual(){return`${this.controlePaginas.getPaginalAtual()}/${this.controlePaginas.getTotalPaginas()}`}firstPage(){this.controlePaginas.goFirst(),this.change.emit("")}lastPage(){this.controlePaginas.goLast(),this.change.emit("")}forwardPage(){this.controlePaginas.forwardPage(),this.change.emit("")}nextPage(){this.controlePaginas.nextPage(),this.change.emit("")}}return v.\u0275fac=function(p){return new(p||v)},v.\u0275cmp=i.Xpm({type:v,selectors:[["app-navegator"]],inputs:{controlePaginas:["controle","controlePaginas"]},outputs:{change:"changePage"},decls:15,vars:1,consts:[[1,"pagina"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","In\xedcio","matTooltipPosition","above",1,"mat-icon-button",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Voltar","matTooltipPosition","above",1,"mat-icon-button",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Avan\xe7ar","matTooltipPosition","above",1,"mat-icon-button",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Final","matTooltipPosition","above",1,"mat-icon-button",3,"click"]],template:function(p,h){1&p&&(i.TgZ(0,"div",0),i.TgZ(1,"button",1),i.NdJ("click",function(){return h.firstPage()}),i.TgZ(2,"mat-icon"),i._uU(3,"first_page"),i.qZA(),i.qZA(),i.TgZ(4,"button",2),i.NdJ("click",function(){return h.forwardPage()}),i.TgZ(5,"mat-icon"),i._uU(6,"chevron_left"),i.qZA(),i.qZA(),i.TgZ(7,"span"),i._uU(8),i.qZA(),i.TgZ(9,"button",3),i.NdJ("click",function(){return h.nextPage()}),i.TgZ(10,"mat-icon"),i._uU(11,"chevron_right"),i.qZA(),i.qZA(),i.TgZ(12,"button",4),i.NdJ("click",function(){return h.lastPage()}),i.TgZ(13,"mat-icon"),i._uU(14,"last_page"),i.qZA(),i.qZA(),i.qZA()),2&p&&(i.xp6(8),i.Oqu(h.getAtual()))},directives:[m.lW,s.gM,c.Hw],styles:[".pagina[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center;font-size:inherit;font-weight:inherit;font:inherit}.pagina[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:2px}"]}),v})()}}]);
"use strict";(self.webpackChunkinventario=self.webpackChunkinventario||[]).push([[401],{2653:(T,g,a)=>{a.d(g,{M:()=>h});class h{constructor(){this.id_empresa=0,this.modulo="",this.assinatura="",this.id_usuario=0,this.parametro="",this.user_insert=0,this.user_update=0}load(s){this.id_empresa=s.id_empresa,this.modulo=s.modulo,this.assinatura=s.assinatura,this.id_usuario=s.id_usuario,this.parametro=s.parametro,this.user_insert=s.user_insert,this.user_update=s.user_update}getParametro(){try{return JSON.parse(this.parametro)}catch(s){return JSON.parse('{"mensagem":"error"}')}}setParametro(s){this.parametro=JSON.stringify(s)}}},9128:(T,g,a)=>{a.r(g),a.d(g,{ConsultaFotoModule:()=>H});var h=a(8583),p=a(4655),s=a(2653),v=a(3430),c=a(1543),P=a(6809),n=a(6924),u=a(8117),d=a(9631),t=a(7716),S=a(789),F=a(3317),C=a(6288),I=a(7535),_=a(2522),E=a(3968),O=a(1095),N=a(1436),U=a(6627),w=a(2818),M=a(8295),x=a(2607);function J(e,l){if(1&e&&(t.TgZ(0,"i"),t.TgZ(1,"div",9),t.TgZ(2,"mat-label",10),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"div",9),t.TgZ(5,"mat-label",10),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"div",9),t.TgZ(8,"mat-label",10),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"div"),t._UZ(11,"app-browser-foto",11),t.qZA(),t.qZA()),2&e){const o=l.$implicit,i=t.oxw(2);t.xp6(3),t.lnq("C\xf3digo Antigo: ",o.id_imobilizado," C\xf3digo Novo: ",o.new_codigo," Ativo:",o.imo_descricao,""),t.xp6(3),t.hij("Ativo:",o.imo_descricao,""),t.xp6(3),t.hij("Obs:",o.lanc_obs,""),t.xp6(2),t.Q6J("FOTOS",i.getFotosAtivo(o.id_imobilizado))}}function L(e,l){if(1&e&&(t.TgZ(0,"div"),t.TgZ(1,"ul"),t.YNc(2,J,12,6,"i",8),t.qZA(),t.qZA()),2&e){const o=t.oxw();t.xp6(2),t.Q6J("ngForOf",o.imoinv)}}function R(e,l){if(1&e){const o=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t._uU(3,"Consulta De Fotos"),t.qZA(),t.TgZ(4,"app-navegator",2),t.NdJ("changePage",function(){return t.CHM(o),t.oxw().onChangePage()}),t.qZA(),t.TgZ(5,"button",12),t.NdJ("click",function(){return t.CHM(o),t.oxw().onTopoPagina()}),t.TgZ(6,"mat-icon"),t._uU(7,"arrow_upward"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const o=t.oxw();t.xp6(4),t.Q6J("controle",o.controlePaginas)}}const z=[{path:"",redirectTo:"consulta_fotos",pathMatch:"full"},{path:"consulta_fotos",component:(()=>{class e{constructor(o,i,r,m,A){this.appSnackBar=o,this.globalService=i,this.imoInventarioService=r,this.fotoService=m,this.router=A,this.tamPagina=50,this.controlePaginas=new v.e(this.tamPagina,this.tamPagina),this.parametro=new s.M,this.imoinv=[],this.listaAtivos=[],this.fotos=[],this.hide=!1}ngOnInit(){}ngOnDestroy(){var o,i;null===(o=this.inscricaoGetAll)||void 0===o||o.unsubscribe(),null===(i=this.inscricaoFoto)||void 0===i||i.unsubscribe(),this.globalService.estadoDelete(this.parametro)}filtrarAtivos(){this.listaAtivos=[],this.imoinv.forEach(o=>{0==this.listaAtivos.filter(r=>r==o.id_imobilizado).length&&this.listaAtivos.push(o.id_imobilizado)})}getFotos(){let o=new n.v;o.id_empresa=this.globalService.getIdEmpresa(),o.id_local=this.globalService.getLocal().id,o.id_inventario=this.globalService.getInventario().codigo,o.imobilizados=this.listaAtivos,o.contador="N",this.globalService.setSpin(!0),this.inscricaoFoto=this.fotoService.getFotosParametro_01(o).subscribe(i=>{this.globalService.setSpin(!1),this.fotos=i},i=>{this.globalService.setSpin(!1),this.fotos=[],this.appSnackBar.openFailureSnackBar(`Pesquisa Nas Fotos  ${(0,P.bZ)(i)}`,"OK")})}getFotosAtivo(o){let i=[],r=1,m=0;if(0==this.fotos.length)return i;let A=this.fotos.filter(b=>b.id_imobilizado==o),f=new u.t(r,[]);return A.length>0&&(A.forEach(b=>{3==m&&(i.push(f),m=0,r++,f=new u.t(r,[])),f.fotos.push(b),m++}),f.fotos.length>0&&i.push(f)),i}getImoIven(){let o=new c.E;o.id_empresa=this.globalService.getIdEmpresa(),o.id_filial=this.globalService.getLocal().id,o.id_inventario=this.globalService.getInventario().codigo,o=(0,d.W)(o,this.parametro.getParametro()),o.contador="N",o.tamPagina=this.tamPagina,o.pagina=this.controlePaginas.getPaginalAtual(),this.fotos=[],this.listaAtivos=[],this.globalService.setSpin(!0),this.inscricaoGetAll=this.imoInventarioService.getImobilizadosinventariosFotos(o).subscribe(i=>{this.globalService.setSpin(!1),this.imoinv=i,this.filtrarAtivos(),this.getFotos()},i=>{this.globalService.setSpin(!1),this.imoinv=[],this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Produtos De Invent\xe1rio ${(0,P.bZ)(i)}`,"OK")})}getImoIvenContador(){let o=new c.E;o.id_empresa=this.globalService.getIdEmpresa(),o.id_filial=this.globalService.getLocal().id,o.id_inventario=this.globalService.getInventario().codigo,o=(0,d.W)(o,this.parametro.getParametro()),o.contador="S",o.tamPagina=this.tamPagina,console.log(o),this.globalService.setSpin(!0),this.inscricaoGetAll=this.imoInventarioService.getImobilizadosinventariosFotos(o).subscribe(i=>{if(this.globalService.setSpin(!1),0==i.total)return this.imoinv=[],void(this.controlePaginas=new v.e(this.tamPagina,1));this.controlePaginas=new v.e(this.tamPagina,0==i.total?1:i.total),i.total>0&&this.getImoIven()},i=>{this.globalService.setSpin(!1),this.imoinv=[],this.controlePaginas=new v.e(this.tamPagina,1)})}onChangePage(){this.getImoIven()}onChangeParametros(o){console.log("change chamdo",o),this.parametro=o,this.getImoIvenContador()}onHome(){this.router.navigate([""])}onTopoPagina(){this.poscionaWindow(0,0)}poscionaWindow(o,i){window.scrollTo(o,i)}onChangeHide(o){this.hide=o}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(S.W),t.Y36(F.U),t.Y36(C.J),t.Y36(I.X),t.Y36(p.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-foto-view"]],decls:14,vars:5,consts:[[1,"div-barra"],[1,"example-spacer"],[3,"controle","changePage"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Atualizar","matTooltipPosition","above",1,"example-icon",3,"click"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltipPosition","above","matTooltip","Retorno","matTooltipPosition","above",3,"click"],["PARAMNAME","paramimoinv",3,"HIDE","CONTROLE_PAGINAS","changeParametro","changeHide"],[4,"ngIf"],["class","div-barra",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"alinha_esquerda"],[1,"Browse_Lanc_td"],[3,"FOTOS"],["mat-icon-button","","aria-label","Example icon-button with share icon","matTooltip","Topo Da P\xe1gina","matTooltipPosition","above",1,"example-icon",3,"click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t._uU(3,"Consulta De Fotos"),t.qZA(),t.TgZ(4,"app-navegator",2),t.NdJ("changePage",function(){return i.onChangePage()}),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return i.getImoIvenContador()}),t.TgZ(6,"mat-icon"),t._uU(7,"rotate_right"),t.qZA(),t.qZA(),t.TgZ(8,"button",4),t.NdJ("click",function(){return i.onHome()}),t.TgZ(9,"mat-icon"),t._uU(10,"home"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"app-filtro-imoinventario",5),t.NdJ("changeParametro",function(m){return i.onChangeParametros(m)})("changeHide",function(m){return i.onChangeHide(m)}),t.qZA(),t.YNc(12,L,3,1,"div",6),t.YNc(13,R,8,1,"div",7)),2&o&&(t.xp6(4),t.Q6J("controle",i.controlePaginas),t.xp6(7),t.Q6J("HIDE",i.hide)("CONTROLE_PAGINAS",i.controlePaginas),t.xp6(1),t.Q6J("ngIf",i.fotos.length>0&&i.listaAtivos.length>0),t.xp6(1),t.Q6J("ngIf",i.fotos.length>0&&i.listaAtivos.length>0))},directives:[_.Ye,E.J,O.lW,N.gM,U.Hw,w.d,h.O5,h.sg,M.hX,x.c],styles:["ul[_ngcontent-%COMP%]{list-style-position:inside;padding-left:0}"]}),e})()}];let $=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.Bz.forChild(z)],p.Bz]}),e})();var y=a(4307),D=a(9243),Z=a(3679),V=a(4466),B=a(8981);let H=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[h.ez,$,y.q,D.Cl,Z.u5,Z.UX,V.m,B.yI.forChild()]]}),e})()},5062:(T,g,a)=>{a.d(g,{E:()=>h});class h{constructor(){this.id_empresa=0,this.modulo="",this.assinatura="",this.id_usuario=0,this.pagina=0,this.tamPagina=50,this.contador="N",this.orderby="",this.sharp=!1}}},5626:(T,g,a)=>{a.d(g,{u:()=>v});var h=a(2340),p=a(7716),s=a(1841);let v=(()=>{class c{constructor(n){this.http=n,this.apiURL=h.N.apiURL}getParametros(){return this.http.get(`${this.apiURL}parametros`)}getParametrosParametro01(n){return this.http.post(`${this.apiURL}parametros`,n)}getParametro(n,u,d,t){return this.http.get(`${this.apiURL}parametro/${n}/${u}/${d}/${t}`)}ParametroInsert(n){return this.http.post(`${this.apiURL}parametro/`,n)}ParametroUpdate(n){return this.http.put(`${this.apiURL}parametro/`,n)}ParametroAtualiza(n){return this.http.post(`${this.apiURL}atualizarparametro/`,n)}ParametroDelete(n,u,d,t){return this.http.delete(`${this.apiURL}parametro/${n}/${u}/${d}/${t}`)}ParametroInstallKey(){return this.http.post(`${this.apiURL}fotokey`,{chave:"nada"})}}return c.\u0275fac=function(n){return new(n||c)(p.LFG(s.eN))},c.\u0275prov=p.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);
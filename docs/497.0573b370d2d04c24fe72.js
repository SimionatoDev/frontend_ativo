"use strict";(self.webpackChunkinventario=self.webpackChunkinventario||[]).push([[497],{1497:(N,p,r)=>{r.r(p),r.d(p,{LoginModule:()=>k});var h=r(8583),u=r(4655),f=r(4372),g=r(2238),m=r(4674),v=r(9019);class P{constructor(){this.titulo="Aten\xe7\xe3o!",this.mensagem="Voc\xea Confirma ?",this.labelOk="OK",this.labelCancel="Cancelar"}}var e=r(7716),b=r(1095);let Z=(()=>{class i{constructor(a,o){this.dialogRef=a,this.data=o}ngOnInit(){}actionFunction(){alert("You have logged out."),this.data.mensagem=this.dialogRef.id,this.closeModal()}closeModal(){this.dialogRef.close()}}return i.\u0275fac=function(a){return new(a||i)(e.Y36(g.so),e.Y36(g.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-progress-bar"]],decls:12,vars:5,consts:[["id","modal-content-wrapper"],["id","modal-header"],["id","modal-title"],["id","modal-body"],["id","modal-footer"],["mat-raised-button","","id","modal-action-button",3,"mat-dialog-close","click"],["mat-raised-button","","id","modal-cancel-button",3,"click"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"header",1),e.TgZ(2,"h1",2),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"section",3),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.qZA(),e.TgZ(7,"footer",4),e.TgZ(8,"button",5),e.NdJ("click",function(){return o.actionFunction()}),e._uU(9),e.qZA(),e.TgZ(10,"button",6),e.NdJ("click",function(){return o.closeModal()}),e._uU(11),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(3),e.Oqu(o.data.titulo),e.xp6(3),e.Oqu(o.data.mensagem),e.xp6(2),e.Q6J("mat-dialog-close",o.data),e.xp6(1),e.Oqu(o.data.labelOk),e.xp6(2),e.Oqu(o.data.labelCancel))},directives:[b.lW,g.ZT],styles:["#modal-content-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;display:grid;grid-template-rows:repeat(1fr,3)}#modal-title[_ngcontent-%COMP%]{font-size:22px}#modal-footer[_ngcontent-%COMP%]{justify-self:right;align-self:center}#modal-action-button[_ngcontent-%COMP%]{margin-right:30px;background-color:#3b3b3b}#modal-cancel-button[_ngcontent-%COMP%]{background-color:#4e4e4e}"]}),i})();var d=r(6809),l=r(3679),C=r(3317),U=r(1209),T=r(8913),A=r(982),O=r(789),S=r(8295),x=r(7441),B=r(9983),M=r(2458);function L(i,s){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){const a=s.$implicit;e.Q6J("value",a.id),e.xp6(1),e.hij(" ",a.razao," ")}}const q=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class i{constructor(a,o,t,n,c,F,I,J){this.formBuilder=a,this.globalService=o,this.usuariosService=t,this.empresasServices=n,this.padraoService=c,this.router=F,this.matDialog=I,this.appSnackBar=J,this.empresas=[],this.formulario=this.formulario=a.group({empresa:[{value:""}],id:[{value:""}],senha:[{value:""}]}),this.getValoresIniciais(),this.getPadrao(!1)}ngOnInit(){this.setValue()}ngOnDestroy(){var a,o,t,n,c;null===(a=this.inscricaoUsuario)||void 0===a||a.unsubscribe(),null===(o=this.inscricaoEmpresa)||void 0===o||o.unsubscribe(),null===(t=this.inscricaoEmpresas)||void 0===t||t.unsubscribe(),null===(n=this.inscricaoPadrao)||void 0===n||n.unsubscribe(),null===(c=this.inscricaoPadraoCrud)||void 0===c||c.unsubscribe()}setValue(){console.log("setValue",this.globalService.padrao),this.formulario.setValue({empresa:this.globalService.padrao.id_empresa_padrao,id:this.globalService.padrao.id_usuario,senha:this.globalService.usuario.senha})}getValoresIniciais(){this.globalService.empresa.id=1,this.globalService.usuario.id_empresa=1,this.globalService.usuario.id=0,this.globalService.usuario.senha="",this.globalService.padrao.id_empresa=1,this.globalService.padrao.id_usuario=0,this.globalService.padrao.id_empresa_padrao=1}getUsuario(a,o){this.globalService.setSpin(!0),this.inscricaoUsuario=this.usuariosService.getUsuario(this.globalService.getIdEmpresa(),a).subscribe(t=>{this.globalService.setSpin(!1),t.senha==o?(this.globalService.setUsuario(t),this.existePadrao()):this.appSnackBar.openFailureSnackBar("Usu\xe1rio Ou Senha Incorretos","OK")},t=>{this.globalService.usuario=new v.g,this.appSnackBar.openFailureSnackBar("Usu\xe1rio Ou Senha Incorretos","OK"),this.globalService.setSpin(!1)})}getEmpresas(){let a=new f.F;a.orderby="Raz\xe3o",this.globalService.setSpin(!0),this.inscricaoEmpresas=this.empresasServices.getEmpresasParametro_01(a).subscribe(o=>{this.empresas=o,this.globalService.empresa=this.empresas[0],this.globalService.setSpin(!1),console.log("getEmpresas",this.globalService.getPadrao()),this.setValue()},o=>{console.log(o),this.empresas=[],this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Pesquisa Nas Empresas ${(0,d.bZ)(o)}`,"OK")})}existePadrao(){this.globalService.setSpin(!0),console.log("existPadrao - ususario",this.globalService.getUsuario()),this.inscricaoPadrao=this.padraoService.getPadrao(this.globalService.getUsuario().id_empresa,this.globalService.getUsuario().id).subscribe(a=>{this.alterPadrao(a)},a=>{this.savePadrao()})}getPadrao(a){a&&(this.globalService.setPadrao(new m.P),this.globalService.getPadrao().id_empresa=this.globalService.getUsuario().id_empresa,this.globalService.getPadrao().id_usuario=this.globalService.getUsuario().id,this.globalService.getPadrao().id_empresa_padrao=this.globalService.getUsuario().id_empresa),console.log("Pegando Padrao",this.globalService.getPadrao()),this.globalService.setSpin(!0),this.inscricaoPadrao=this.padraoService.getPadrao(this.globalService.getUsuario().id_empresa,this.globalService.getUsuario().id).subscribe(o=>{this.globalService.setSpin(!1),this.globalService.padrao=o,console.log(" getPadrao - Achei Padrao ",o),a?(this.globalService.setPadrao(o),this.globalService.setTrocaPadrao(),this.globalService.setLogado(!0)):this.getEmpresas()},o=>{this.globalService.setSpin(!1),this.getValoresIniciais(),console.log(" getPadrao - N\xe3o Achei!",this.globalService.getPadrao()),console.log("Fsicalizacao",a),console.log(o),a?(this.savePadrao(),this.globalService.setLogado(!0)):this.getEmpresas()})}onValidar(){const a=this.formulario.value.id,o=this.formulario.value.senha;this.empresas.findIndex(n=>this.formulario.value.empresa==n.id)>=0?this.getUsuario(a,o):this.appSnackBar.openWarningnackBar("N\xe3o Encontrei A Empresa!","OK")}onCancelar(){this.router.navigate(["/"])}onSair(){this.globalService.setLogado(!1),this.globalService.setUsuario(new v.g)}onEsqueceu(){this.showDialog("Ola....")}showDialog(a){const o=new P;o.labelOk="Continua...",o.labelCancel="Cancelar";const t=new g.vA;t.disableClose=!0,t.id="modal-component",t.height="350px",t.width="600px",t.data=o,this.matDialog.open(Z,t).beforeClosed().subscribe(c=>{})}savePadrao(){this.globalService.setPadrao(new m.P),this.globalService.getPadrao().id_empresa=this.globalService.getUsuario().id_empresa,this.globalService.getPadrao().id_usuario=this.globalService.getUsuario().id,this.globalService.getPadrao().id_empresa_padrao=this.globalService.getUsuario().id_empresa,this.globalService.padrao.user_insert=this.globalService.getUsuario().id,this.globalService.setSpin(!0),this.inscricaoPadraoCrud=this.padraoService.padraoInsert(this.globalService.padrao).subscribe(a=>{this.globalService.setSpin(!1),this.globalService.setTrocaPadrao(),this.globalService.setLogado(!0)},a=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Inser\xe7\xe3o Padrao ${(0,d.bZ)(a)}`,"OK")})}alterPadrao(a){this.globalService.setPadrao(a),this.globalService.padrao.user_update=this.globalService.getUsuario().id,this.globalService.setSpin(!0),this.inscricaoPadraoCrud=this.padraoService.padraoUpdate(this.globalService.padrao).subscribe(o=>{this.globalService.setSpin(!1),this.globalService.setTrocaPadrao(),this.globalService.setLogado(!0)},o=>{this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Altera\xe7\xe3o Padrao ${(0,d.bZ)(o)}`,"OK")})}}return i.\u0275fac=function(a){return new(a||i)(e.Y36(l.qu),e.Y36(C.U),e.Y36(U.J),e.Y36(T.P),e.Y36(A.c),e.Y36(u.F0),e.Y36(g.uw),e.Y36(O.W))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-login"]],decls:34,vars:2,consts:[[1,"quadro"],["autocomplete","off",1,"formulario",3,"formGroup"],[1,"linha-login"],["field","","appearance","outline",1,"controle"],["formControlName","empresa"],["autofocus","",3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"controle"],["matInput","","formControlName","id"],["matInput","","formControlName","senha","type","password"],[1,"button-container-right"],["mat-raised-button","","color","primary",1,"botao",3,"click"],["mat-raised-button","","color","accent",1,"botao",3,"click"],["mat-button","",1,"green-icon",3,"click"],["autofocus","",3,"value"]],template:function(a,o){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"form",1),e.TgZ(2,"h2"),e._uU(3,"Bem Vindo Ao Invent\xe1rio WEB"),e.qZA(),e.TgZ(4,"h3"),e._uU(5,"Identifique-se Por Favor"),e.qZA(),e.TgZ(6,"div",2),e.TgZ(7,"mat-form-field",3),e.TgZ(8,"mat-label"),e._uU(9,"Empresa"),e.qZA(),e.TgZ(10,"mat-select",4),e.YNc(11,L,2,2,"mat-option",5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",2),e.TgZ(13,"mat-form-field",6),e.TgZ(14,"mat-label"),e._uU(15,"USU\xc1RIO"),e.qZA(),e._UZ(16,"input",7),e.qZA(),e.qZA(),e.TgZ(17,"div",2),e.TgZ(18,"mat-form-field",6),e.TgZ(19,"mat-label"),e._uU(20,"Senha"),e.qZA(),e._UZ(21,"input",8),e.qZA(),e.qZA(),e.TgZ(22,"div",9),e.TgZ(23,"button",10),e.NdJ("click",function(){return o.onValidar()}),e._uU(24,"Login"),e.qZA(),e.TgZ(25,"button",11),e.NdJ("click",function(){return o.onCancelar()}),e._uU(26,"Cancelar"),e.qZA(),e.qZA(),e._UZ(27,"br"),e._UZ(28,"br"),e.TgZ(29,"div",9),e.TgZ(30,"button",12),e.NdJ("click",function(){return o.onSair()}),e._uU(31,"Sair"),e.qZA(),e.TgZ(32,"button",12),e.NdJ("click",function(){return o.onEsqueceu()}),e._uU(33,"Esqueceu A Senha"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(1),e.Q6J("formGroup",o.formulario),e.xp6(10),e.Q6J("ngForOf",o.empresas))},directives:[l._Y,l.JL,l.sg,S.KE,S.hX,x.gD,l.JJ,l.u,h.sg,B.Nt,l.Fj,b.lW,M.ey],styles:[".quadro[_ngcontent-%COMP%]{width:50%;margin:50px auto;border:2px solid black;box-shadow:10px 10px 5px 6px gray}.formulario[_ngcontent-%COMP%]{margin:10px 10px 10px 30px;align-items:center}h2[_ngcontent-%COMP%]{text-align:center;align-items:center;margin-top:20px;margin-bottom:10px;color:#00f}h3[_ngcontent-%COMP%]{text-align:center;align-items:center;margin-top:20px;margin-bottom:10px;color:red}.controle[_ngcontent-%COMP%]{width:inherit}.botao[_ngcontent-%COMP%]{min-width:100px;max-width:160px}.button-container-right[_ngcontent-%COMP%]{display:flex;justify-content:right;height:min-content;width:100%}.button-container-right[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px}"]}),i})()}];let y=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[u.Bz.forChild(q)],u.Bz]}),i})();var E=r(4307);let k=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[h.ez,y,E.q,l.u5,l.UX]]}),i})()}}]);
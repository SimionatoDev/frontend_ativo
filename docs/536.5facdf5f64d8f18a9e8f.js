"use strict";(self.webpackChunkinventario=self.webpackChunkinventario||[]).push([[536],{4536:(N,f,n)=>{n.r(f),n.d(f,{AmbienteModule:()=>ot});var d=n(8583),g=n(8569),b=n(1878),A=n(4576),c=n(4372),T=n(3010),l=n(6825),Z=n(6468),p=n(3032);class u{constructor(){this.id="0",this.descricao=""}}var v=n(6809),B=n(4674),t=n(7716),q=n(3317),m=n(3679),L=n(8913),M=n(5298),$=n(9297),F=n(1209),J=n(982),R=n(5626),C=n(4655),y=n(789),Y=n(2522),x=n(1095),U=n(1436),O=n(6627),P=n(8295),z=n(7441),Q=n(2458);function D(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",3),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.onChangeOpcao(i.getAcoes().Inclusao_Ambiente)}),t.TgZ(1,"mat-icon",4),t._uU(2,"add_comment"),t.qZA(),t.qZA()}}function G(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",5),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.onChangeOpcao(i.getAcoes().Exclusao_Ambiente)}),t.TgZ(1,"mat-icon",4),t._uU(2,"delete"),t.qZA(),t.qZA()}}let K=(()=>{class o{constructor(){this.incluir=!1,this.excluir=!1,this.changeOpcao=new t.vpe}ngOnInit(){}getAcoes(){return p.I}onChangeOpcao(e){this.changeOpcao.emit(e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["barra-acoes-ambiente"]],inputs:{incluir:["INCLUIR_AMBIENTE","incluir"],excluir:["EXCLUIR_AMBIENTE","excluir"]},outputs:{changeOpcao:"changeOpcao"},decls:3,vars:2,consts:[[1,"barras2"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Incluir Ambiente","matTooltipPosition","above",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","class","botoes","matTooltip","Excluir Ambiente","matTooltipPosition","above","class","botoes",3,"click",4,"ngIf"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Incluir Ambiente","matTooltipPosition","above",3,"click"],[1,"icon-size"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Excluir Ambiente","matTooltipPosition","above",1,"botoes",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.YNc(1,D,3,0,"button",1),t.YNc(2,G,3,0,"button",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",a.incluir),t.xp6(1),t.Q6J("ngIf",a.excluir))},directives:[d.O5,x.lW,U.gM,O.Hw],styles:[".barras2[_ngcontent-%COMP%]{width:inherit;margin:0 auto;display:grid;grid-template-columns:20% 20% 20% 20%}mat-icon[_ngcontent-%COMP%]{font-size:20px}"]}),o})();function X(o,r){if(1&o&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.razao," ")}}function H(o,r){if(1&o&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.razao," ")}}function W(o,r){if(1&o&&(t.TgZ(0,"mat-option",14),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.codigo),t.xp6(1),t.hij(" ",e.descricao," ")}}function j(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"div"),t.TgZ(3,"mat-label",17),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"div"),t.TgZ(7,"mat-label",17),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"td"),t.TgZ(10,"div"),t.TgZ(11,"mat-label",17),t._uU(12),t.qZA(),t.qZA(),t.TgZ(13,"div"),t.TgZ(14,"mat-label",17),t._uU(15),t.qZA(),t.qZA(),t.TgZ(16,"div"),t.TgZ(17,"mat-label",17),t._uU(18),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"td"),t.TgZ(20,"div"),t.TgZ(21,"barra-acoes-ambiente",19),t.NdJ("changeOpcao",function(i){const h=t.CHM(e).$implicit;return t.oxw(2).escolha(i,h)}),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=r.$implicit;t.xp6(4),t.Oqu(e.id),t.xp6(4),t.Oqu(e.razao),t.xp6(4),t.Oqu(e.empresa),t.xp6(3),t.Oqu(e.local),t.xp6(3),t.Oqu(e.inventario),t.xp6(3),t.Q6J("INCLUIR_AMBIENTE",!0)("EXCLUIR_AMBIENTE","S"==e.tem_padrao)}}function V(o,r){if(1&o&&(t.TgZ(0,"div"),t.TgZ(1,"table",15),t.TgZ(2,"tr",16),t.TgZ(3,"th"),t.TgZ(4,"mat-label",17),t._uU(5,"C\xf3digo"),t.qZA(),t.qZA(),t.TgZ(6,"th"),t.TgZ(7,"div"),t.TgZ(8,"mat-label",17),t._uU(9,"Nome"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"th"),t.TgZ(11,"div"),t.TgZ(12,"mat-label",17),t._uU(13,"Ambiente"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"th"),t.TgZ(15,"div"),t.TgZ(16,"mat-label",17),t._uU(17,"A\xe7\xe3o"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(18,j,22,7,"tr",18),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(18),t.Q6J("ngForOf",e.usuarios)}}const w=[{path:"",redirectTo:"ambientes",pathMatch:"full"},{path:"ambientes",component:(()=>{class o{constructor(e,a,i,s,h,_,nt,st,rt,lt){this.globalService=e,this.formBuilder=a,this.empresaService=i,this.localService=s,this.inventarioService=h,this.usuarioService=_,this.padraoService=nt,this.parametrosService=st,this.router=rt,this.appSnackBar=lt,this.empresas=[],this.empresa=new g.Y,this.locais=[],this.local=new A.s,this.inventarios=[],this.inventario=new b.q,this.usuarios=[],this.retorno=!1,this.opcoes=[],this.parametros=a.group({empresa:[null],local:[null],inventario:[null]});const S=new u;S.id="0",S.descricao="N\xe3o Faz Nada";const I=new u;I.id="1",I.descricao="Incluir";const E=new u;E.id="2",E.descricao="Remover",this.opcoes.push(S),this.opcoes.push(I),this.opcoes.push(E)}ngOnInit(){this.onGetEmpresas()}ngOnDestroy(){var e,a,i,s,h;null===(e=this.inscricaoEmpresas)||void 0===e||e.unsubscribe(),null===(a=this.inscricaoLocais)||void 0===a||a.unsubscribe(),null===(i=this.inscricaoInventarios)||void 0===i||i.unsubscribe(),null===(s=this.inscricaoUsuarios)||void 0===s||s.unsubscribe(),null===(h=this.inscricaoPadrao)||void 0===h||h.unsubscribe()}onGetEmpresas(){let e=new c.F;e.orderby="C\xf3digo",this.globalService.setSpin(!0),this.inscricaoEmpresas=this.empresaService.getEmpresasParametro_01(e).subscribe(a=>{this.globalService.setSpin(!1),this.empresas=a,this.empresa=this.empresas[0],this.setValues(),this.onGetLocais()},a=>{this.globalService.setSpin(!1),this.empresas=[],this.appSnackBar.openFailureSnackBar(`Pesquisa Nas Empresas ${(0,v.bZ)(a)}`,"OK")})}onGetLocais(){let e=new l.X;e.id_empresa=this.empresa.id,e.orderby="C\xf3digo",this.globalService.setSpin(!0),this.inscricaoLocais=this.localService.getLocaisParametro_01(e).subscribe(a=>{this.globalService.setSpin(!1),this.locais=a,this.local=this.locais[0],this.parametros.patchValue({local:this.local.id}),this.onGetInventarios()},a=>{this.globalService.setSpin(!1),this.locais=[],this.local=new A.s,this.inventarios=[],this.inventario=new b.q,this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Locais ${(0,v.bZ)(a)}`,"OK")})}onGetInventarios(){var e,a;let i=new T.T;i.id_empresa=null===(e=this.parametros.value)||void 0===e?void 0:e.empresa,i.id_filial=null===(a=this.parametros.value)||void 0===a?void 0:a.local,i.orderby="Descri\xe7\xe3o",this.globalService.setSpin(!0),this.inscricaoInventarios=this.inventarioService.getInventariosParametro_01(i).subscribe(s=>{this.globalService.setSpin(!1),this.inventarios=s,this.inventario=s[0],this.parametros.patchValue({inventario:this.inventario.codigo})},s=>{this.globalService.setSpin(!1),this.empresas=[],this.empresa=new g.Y,this.locais=[],this.local=new A.s,this.inventarios=[],this.inventario=new b.q,this.globalService.setSpin(!1),this.appSnackBar.openFailureSnackBar(`Pesquisa Nos Invent\xe1rios ${(0,v.bZ)(s)}`,"OK")})}getUsuarios(){let e=this.empresas.findIndex(i=>{var s;return i.id===(null===(s=this.parametros.value)||void 0===s?void 0:s.empresa)});e>=0&&(this.empresa=this.empresas[e]),e=this.locais.findIndex(i=>{var s;return i.id===(null===(s=this.parametros.value)||void 0===s?void 0:s.local)}),e>=0&&(this.local=this.locais[e]),e=this.inventarios.findIndex(i=>{var s;return i.codigo===(null===(s=this.parametros.value)||void 0===s?void 0:s.inventario)}),e>=0&&(this.inventario=this.inventarios[e]);let a=new Z.w;a.id_empresa=this.globalService.getIdEmpresa(),a.ativo="S",a.grupos.push(902),a.grupos.push(906),a.orderby="Raz\xe3o",this.globalService.setSpin(!0),this.inscricaoUsuarios=this.usuarioService.getusuarios_05(a).subscribe(i=>{this.globalService.setSpin(!1),this.usuarios=i,console.log(this.usuarios)},i=>{this.globalService.setSpin(!1),this.usuarios=[],this.appSnackBar.openSuccessSnackBar(`Pesquisa Nos Usu\xe1rios ${(0,v.bZ)(i)}`,"OK")})}deletePadrao(e){this.globalService.setSpin(!0),this.inscricaoPadrao=this.padraoService.padraoDelete(e.id_empresa,e.id).subscribe(a=>{this.globalService.setSpin(!1),e.tem_padrao="N",e.empresa="",e.local="",e.inventario=""},a=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar(`Falha Na Exclus\xe3o ${(0,v.bZ)(a)}`,"OK")})}savePadrao(e,a){this.globalService.setSpin(!0),this.inscricaoPadrao=this.padraoService.padraoInsert(e).subscribe(i=>{this.globalService.setSpin(!1),a.tem_padrao="S",a.empresa=this.empresa.razao,a.local=this.local.razao,a.inventario=this.inventario.descricao},i=>{this.globalService.setSpin(!1),this.appSnackBar.openSuccessSnackBar(`Falha Na Inclus\xe3o ${(0,v.bZ)(i)}`,"OK")})}setValues(){this.parametros.setValue({empresa:this.empresa.id,local:this.local.id,inventario:this.inventario.codigo})}onHome(){this.router.navigate([""])}onChangeEmpresa(){this.onGetLocais()}onChangeLocal(){let e=this.locais.findIndex(a=>{var i;return a.id===(null===(i=this.parametros.value)||void 0===i?void 0:i.local)});e>=0&&(this.local=this.locais[e],this.onGetInventarios())}escolha(e,a){if(e==p.I.Inclusao_Ambiente){let i=new B.P;i.id_empresa=a.id_empresa,i.id_usuario=a.id,i.id_empresa_padrao=this.empresa.id,i.id_local_padrao=this.local.id,i.id_inv_padrao=this.inventario.codigo,i.user_insert=this.globalService.getUsuario().id,i.user_update=0,this.savePadrao(i,a)}e==p.I.Exclusao_Ambiente&&this.deletePadrao(a)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(q.U),t.Y36(m.qu),t.Y36(L.P),t.Y36(M.C),t.Y36($.I),t.Y36(F.J),t.Y36(J.c),t.Y36(R.u),t.Y36(C.F0),t.Y36(y.W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-crud-ambiente"]],decls:28,vars:5,consts:[[1,"div-barra"],[1,"example-spacer"],["mat-icon-button","","aria-label","Example icon-button with share icon ","matTooltip","Retorno","matTooltipPosition","above",3,"click"],[1,"parametros","box"],["autocomplete","off",1,"col-med-4",3,"formGroup"],["field","","appearance","outline",1,"col-max"],["formControlName","empresa",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","local",3,"selectionChange"],["field","","appearance","outline",1,"column-span-2"],["formControlName","inventario"],[1,"button-container-right"],["mat-raised-button","","color","primary",3,"click"],[4,"ngIf"],[3,"value"],[1,"Browse_Lanc","box"],[1,"coluna-cabec-gerador"],[1,"Browse_Lanc_td"],[4,"ngFor","ngForOf"],[3,"INCLUIR_AMBIENTE","EXCLUIR_AMBIENTE","changeOpcao"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-toolbar"),t.TgZ(2,"span",1),t._uU(3,"Ambientes:"),t.qZA(),t.TgZ(4,"button",2),t.NdJ("click",function(){return a.onHome()}),t.TgZ(5,"mat-icon"),t._uU(6,"home"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",3),t.TgZ(8,"form",4),t.TgZ(9,"mat-form-field",5),t.TgZ(10,"mat-label"),t._uU(11,"Empresa"),t.qZA(),t.TgZ(12,"mat-select",6),t.NdJ("selectionChange",function(){return a.onChangeEmpresa()}),t.YNc(13,X,2,2,"mat-option",7),t.qZA(),t.qZA(),t.TgZ(14,"mat-form-field",5),t.TgZ(15,"mat-label"),t._uU(16,"Local"),t.qZA(),t.TgZ(17,"mat-select",8),t.NdJ("selectionChange",function(){return a.onChangeLocal()}),t.YNc(18,H,2,2,"mat-option",7),t.qZA(),t.qZA(),t.TgZ(19,"mat-form-field",9),t.TgZ(20,"mat-label"),t._uU(21,"Invent\xe1rio"),t.qZA(),t.TgZ(22,"mat-select",10),t.YNc(23,W,2,2,"mat-option",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"div",11),t.TgZ(25,"button",12),t.NdJ("click",function(){return a.getUsuarios()}),t._uU(26," Usu\xe1rios "),t.qZA(),t.qZA(),t.qZA(),t.YNc(27,V,19,1,"div",13)),2&e&&(t.xp6(8),t.Q6J("formGroup",a.parametros),t.xp6(5),t.Q6J("ngForOf",a.empresas),t.xp6(5),t.Q6J("ngForOf",a.locais),t.xp6(5),t.Q6J("ngForOf",a.inventarios),t.xp6(4),t.Q6J("ngIf",a.usuarios.length>0))},directives:[Y.Ye,x.lW,U.gM,O.Hw,m._Y,m.JL,m.sg,P.KE,P.hX,z.gD,m.JJ,m.u,d.sg,d.O5,Q.ey,K],styles:[".coluna-cabec-gerador[_ngcontent-%COMP%]{background-color:#acb0b8;text-align:left;height:max-content}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2aa}tr[_ngcontent-%COMP%]:hover{background-color:#caa99d}.parametros[_ngcontent-%COMP%]{padding:3px;font-size:medium;color:#0ff}"]}),o})()}];let k=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[C.Bz.forChild(w)],C.Bz]}),o})();var tt=n(7666),et=n(9243),at=n(4466),it=n(8981);let ot=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.ez,k,tt.q,et.Cl,m.u5,m.UX,at.m,it.yI.forChild()]]}),o})()},5626:(N,f,n)=>{n.d(f,{u:()=>A});var d=n(2340),g=n(7716),b=n(1841);let A=(()=>{class c{constructor(l){this.http=l,this.apiURL=d.N.apiURL}getParametros(){return this.http.get(`${this.apiURL}parametros`)}getParametrosParametro01(l){return this.http.post(`${this.apiURL}parametros`,l)}getParametro(l,Z,p,u){return this.http.get(`${this.apiURL}parametro/${l}/${Z}/${p}/${u}`)}ParametroInsert(l){return this.http.post(`${this.apiURL}parametro/`,l)}ParametroUpdate(l){return this.http.put(`${this.apiURL}parametro/`,l)}ParametroAtualiza(l){return this.http.post(`${this.apiURL}atualizarparametro/`,l)}ParametroDelete(l,Z,p,u){return this.http.delete(`${this.apiURL}parametro/${l}/${Z}/${p}/${u}`)}ParametroInstallKey(){return this.http.post(`${this.apiURL}fotokey`,{chave:"nada"})}}return c.\u0275fac=function(l){return new(l||c)(g.LFG(b.eN))},c.\u0275prov=g.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);